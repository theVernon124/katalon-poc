#!/usr/bin/env node

require('source-map-support').install();

'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _yargs = require('yargs');

var _yargs2 = _interopRequireDefault(_yargs);

var _asyncbox = require('asyncbox');

var _libServer = require('./lib/server');

var _libDriver = require('./lib/driver');

var _libDesiredCaps = require('./lib/desired-caps');

var _libCommandsIndex = require('./lib/commands/index');

var _libSettings = require('./lib/settings');

var settings = _interopRequireWildcard(_libSettings);

var _libDevice = require('./lib/device');

var device = _interopRequireWildcard(_libDevice);

var _libUtils = require('./lib/utils');

var _libUtils2 = _interopRequireDefault(_libUtils);

var _libIwdp = require('./lib/iwdp');

var _libUiautoUiauto = require('./lib/uiauto/uiauto');

var uiauto = _interopRequireWildcard(_libUiautoUiauto);

var _libInstrumentsIndex = require('./lib/instruments/index');

var _libCommandsContext = require('./lib/commands/context');

// ios log access

var _libDeviceLogIosLog = require('./lib/device-log/ios-log');

var _libDeviceLogIosLog2 = _interopRequireDefault(_libDeviceLogIosLog);

var _libDeviceLogIosCrashLog = require('./lib/device-log/ios-crash-log');

var _libDeviceLogIosCrashLog2 = _interopRequireDefault(_libDeviceLogIosCrashLog);

var _libDeviceLogIosPerformanceLog = require('./lib/device-log/ios-performance-log');

var _libDeviceLogIosPerformanceLog2 = _interopRequireDefault(_libDeviceLogIosPerformanceLog);

// app utils

var _libAppUtils = require('./lib/app-utils');

var appUtils = _interopRequireWildcard(_libAppUtils);

var DEFAULT_HOST = "localhost";
var DEFAULT_PORT = 4723;

function main() {
  var port, host;
  return _regeneratorRuntime.async(function main$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        port = _yargs2['default'].argv.port || DEFAULT_PORT;
        host = _yargs2['default'].argv.host || DEFAULT_HOST;
        return context$1$0.abrupt('return', (0, _libServer.startServer)(port, host));

      case 3:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
}

if (require.main === module) {
  (0, _asyncbox.asyncify)(main);
}

exports.IosDriver = _libDriver.IosDriver;
exports.desiredCapConstraints = _libDesiredCaps.desiredCapConstraints;
exports.desiredCapValidation = _libDesiredCaps.desiredCapValidation;
exports.commands = _libCommandsIndex.commands;
exports.iosCommands = _libCommandsIndex.iosCommands;
exports.settings = settings;
exports.device = device;
exports.defaultServerCaps = _libDriver.defaultServerCaps;
exports.utils = _libUtils2['default'];
exports.IWDP = _libIwdp.IWDP;
exports.uiauto = uiauto;
exports.Instruments = _libInstrumentsIndex.Instruments;
exports.instrumentsUtils = _libInstrumentsIndex.instrumentsUtils;
exports.startHttpsServer = _libServer.startHttpsServer;
exports.NATIVE_WIN = _libCommandsContext.NATIVE_WIN;
exports.WEBVIEW_WIN = _libCommandsContext.WEBVIEW_WIN;
exports['default'] = _libDriver.IosDriver;
exports.IOSLog = _libDeviceLogIosLog2['default'];
exports.IOSCrashLog = _libDeviceLogIosCrashLog2['default'];
exports.IOSPerformanceLog = _libDeviceLogIosPerformanceLog2['default'];
exports.appUtils = appUtils;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztxQkFHa0IsT0FBTzs7Ozt3QkFDQSxVQUFVOzt5QkFDVyxjQUFjOzt5QkFDZixjQUFjOzs4QkFDQyxvQkFBb0I7O2dDQUMxQyxzQkFBc0I7OzJCQUNsQyxnQkFBZ0I7O0lBQTlCLFFBQVE7O3lCQUNJLGNBQWM7O0lBQTFCLE1BQU07O3dCQUNBLGFBQWE7Ozs7dUJBQ1YsWUFBWTs7K0JBQ1QscUJBQXFCOztJQUFqQyxNQUFNOzttQ0FDNEIseUJBQXlCOztrQ0FDL0Isd0JBQXdCOzs7O2tDQXlCN0MsMEJBQTBCOzs7O3VDQUNyQixnQ0FBZ0M7Ozs7NkNBQzFCLHNDQUFzQzs7Ozs7OzJCQUsxQyxpQkFBaUI7O0lBQS9CLFFBQVE7O0FBN0JwQixJQUFNLFlBQVksR0FBRyxXQUFXLENBQUM7QUFDakMsSUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDOztBQUUxQixTQUFlLElBQUk7TUFDYixJQUFJLEVBQ0osSUFBSTs7OztBQURKLFlBQUksR0FBRyxtQkFBTSxJQUFJLENBQUMsSUFBSSxJQUFJLFlBQVk7QUFDdEMsWUFBSSxHQUFHLG1CQUFNLElBQUksQ0FBQyxJQUFJLElBQUksWUFBWTs0Q0FDbkMsNEJBQVksSUFBSSxFQUFFLElBQUksQ0FBQzs7Ozs7OztDQUMvQjs7QUFFRCxJQUFJLE9BQU8sQ0FBQyxJQUFJLEtBQUssTUFBTSxFQUFFO0FBQzNCLDBCQUFTLElBQUksQ0FBQyxDQUFDO0NBQ2hCOztRQUVRLFNBQVM7UUFBRSxxQkFBcUI7UUFBRSxvQkFBb0I7UUFBRSxRQUFRO1FBQ2hFLFdBQVc7UUFBRSxRQUFRLEdBQVIsUUFBUTtRQUFFLE1BQU0sR0FBTixNQUFNO1FBQUUsaUJBQWlCO1FBQUUsS0FBSztRQUFFLElBQUk7UUFBRSxNQUFNLEdBQU4sTUFBTTtRQUNyRSxXQUFXO1FBQUUsZ0JBQWdCO1FBQUUsZ0JBQWdCO1FBQUUsVUFBVTtRQUMzRCxXQUFXOztRQVVYLE1BQU07UUFBRSxXQUFXO1FBQUUsaUJBQWlCO1FBS3RDLFFBQVEsR0FBUixRQUFRIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyB0cmFuc3BpbGU6bWFpblxuXG5pbXBvcnQgeWFyZ3MgZnJvbSAneWFyZ3MnO1xuaW1wb3J0IHsgYXN5bmNpZnkgfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyBzdGFydFNlcnZlciwgc3RhcnRIdHRwc1NlcnZlciB9IGZyb20gJy4vbGliL3NlcnZlcic7XG5pbXBvcnQgeyBJb3NEcml2ZXIsIGRlZmF1bHRTZXJ2ZXJDYXBzIH0gZnJvbSAnLi9saWIvZHJpdmVyJztcbmltcG9ydCB7IGRlc2lyZWRDYXBDb25zdHJhaW50cywgZGVzaXJlZENhcFZhbGlkYXRpb24gfSBmcm9tICcuL2xpYi9kZXNpcmVkLWNhcHMnO1xuaW1wb3J0IHsgY29tbWFuZHMsIGlvc0NvbW1hbmRzIH0gZnJvbSAnLi9saWIvY29tbWFuZHMvaW5kZXgnO1xuaW1wb3J0ICogYXMgc2V0dGluZ3MgZnJvbSAnLi9saWIvc2V0dGluZ3MnO1xuaW1wb3J0ICogYXMgZGV2aWNlIGZyb20gJy4vbGliL2RldmljZSc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi9saWIvdXRpbHMnO1xuaW1wb3J0IHsgSVdEUCB9IGZyb20gJy4vbGliL2l3ZHAnO1xuaW1wb3J0ICogYXMgdWlhdXRvIGZyb20gJy4vbGliL3VpYXV0by91aWF1dG8nO1xuaW1wb3J0IHsgSW5zdHJ1bWVudHMsIGluc3RydW1lbnRzVXRpbHMgfSBmcm9tICcuL2xpYi9pbnN0cnVtZW50cy9pbmRleCc7XG5pbXBvcnQgeyBOQVRJVkVfV0lOLCBXRUJWSUVXX1dJTiB9IGZyb20gJy4vbGliL2NvbW1hbmRzL2NvbnRleHQnO1xuXG5cbmNvbnN0IERFRkFVTFRfSE9TVCA9IFwibG9jYWxob3N0XCI7XG5jb25zdCBERUZBVUxUX1BPUlQgPSA0NzIzO1xuXG5hc3luYyBmdW5jdGlvbiBtYWluICgpIHtcbiAgbGV0IHBvcnQgPSB5YXJncy5hcmd2LnBvcnQgfHwgREVGQVVMVF9QT1JUO1xuICBsZXQgaG9zdCA9IHlhcmdzLmFyZ3YuaG9zdCB8fCBERUZBVUxUX0hPU1Q7XG4gIHJldHVybiBzdGFydFNlcnZlcihwb3J0LCBob3N0KTtcbn1cblxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XG4gIGFzeW5jaWZ5KG1haW4pO1xufVxuXG5leHBvcnQgeyBJb3NEcml2ZXIsIGRlc2lyZWRDYXBDb25zdHJhaW50cywgZGVzaXJlZENhcFZhbGlkYXRpb24sIGNvbW1hbmRzLFxuICAgICAgICAgaW9zQ29tbWFuZHMsIHNldHRpbmdzLCBkZXZpY2UsIGRlZmF1bHRTZXJ2ZXJDYXBzLCB1dGlscywgSVdEUCwgdWlhdXRvLFxuICAgICAgICAgSW5zdHJ1bWVudHMsIGluc3RydW1lbnRzVXRpbHMsIHN0YXJ0SHR0cHNTZXJ2ZXIsIE5BVElWRV9XSU4sXG4gICAgICAgICBXRUJWSUVXX1dJTiB9O1xuXG5leHBvcnQgZGVmYXVsdCBJb3NEcml2ZXI7XG5cblxuLy8gaW9zIGxvZyBhY2Nlc3NcbmltcG9ydCBJT1NMb2cgZnJvbSAnLi9saWIvZGV2aWNlLWxvZy9pb3MtbG9nJztcbmltcG9ydCBJT1NDcmFzaExvZyBmcm9tICcuL2xpYi9kZXZpY2UtbG9nL2lvcy1jcmFzaC1sb2cnO1xuaW1wb3J0IElPU1BlcmZvcm1hbmNlTG9nIGZyb20gJy4vbGliL2RldmljZS1sb2cvaW9zLXBlcmZvcm1hbmNlLWxvZyc7XG5cbmV4cG9ydCB7IElPU0xvZywgSU9TQ3Jhc2hMb2csIElPU1BlcmZvcm1hbmNlTG9nIH07XG5cbi8vIGFwcCB1dGlsc1xuaW1wb3J0ICogYXMgYXBwVXRpbHMgZnJvbSAnLi9saWIvYXBwLXV0aWxzJztcblxuZXhwb3J0IHsgYXBwVXRpbHMgfTtcbiJdLCJzb3VyY2VSb290IjoiLi4ifQ==
