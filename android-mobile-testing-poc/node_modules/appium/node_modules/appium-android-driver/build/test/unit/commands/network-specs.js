'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _appiumAdb = require('appium-adb');

var _appiumAdb2 = _interopRequireDefault(_appiumAdb);

var _ = require('../../..');

var _2 = _interopRequireDefault(_);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var driver = undefined;
var adb = undefined;
var sandbox = _sinon2['default'].sandbox.create();
_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('Network', function () {
  beforeEach(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          driver = new _2['default']();
          adb = new _appiumAdb2['default']();
          driver.adb = adb;
          sandbox.stub(adb);
          sandbox.stub(driver, 'isEmulator');
          sandbox.stub(driver, 'wrapBootstrapDisconnect').callsFake(function callee$2$0(fn) {
            return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
              while (1) switch (context$3$0.prev = context$3$0.next) {
                case 0:
                  context$3$0.next = 2;
                  return _regeneratorRuntime.awrap(fn());

                case 2:
                case 'end':
                  return context$3$0.stop();
              }
            }, null, this);
          });
          sandbox.stub(_bluebird2['default'], 'delay');

        case 7:
        case 'end':
          return context$2$0.stop();
      }
    }, null, this);
  });
  afterEach(function () {
    sandbox.restore();
  });
  describe('getNetworkConnection', function () {
    beforeEach(function () {
      adb.isAirplaneModeOn.returns(false);
      adb.isDataOn.returns(false);
      sandbox.stub(driver, 'isWifiOn').returns(false);
    });
    it('should determine nothing enabled', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.getNetworkConnection().should.eventually.equal(0));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should determine airplane mode is on', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.isAirplaneModeOn.returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getNetworkConnection().should.eventually.equal(1));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should determine wifi is on', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.isWifiOn.returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getNetworkConnection().should.eventually.equal(2));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should determine data is on', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.isDataOn.returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getNetworkConnection().should.eventually.equal(4));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should determine wifi and data are on', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.isWifiOn.returns(true);
            adb.isDataOn.returns(true);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getNetworkConnection().should.eventually.equal(6));

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('isWifiOn', function () {
    it('should return wifi state', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.isWifiOn.returns('wifi_state');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isWifiOn().should.become('wifi_state'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('setNetworkConnection', function () {
    beforeEach(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'setWifiState');
            driver.isEmulator.returns(false);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should turn off wifi and data', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'getNetworkConnection').returns(6);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.setNetworkConnection(0));

          case 3:
            adb.setAirplaneMode.called.should.be['false'];
            adb.broadcastAirplaneMode.called.should.be['false'];
            driver.setWifiState.calledWithExactly(false).should.be['true'];
            adb.setDataState.calledWithExactly(false, false).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should turn on and broadcast airplane mode', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'getNetworkConnection').returns(0);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.setNetworkConnection(1));

          case 3:
            adb.setAirplaneMode.calledWithExactly(true).should.be['true'];
            adb.broadcastAirplaneMode.calledWithExactly(true).should.be['true'];
            driver.setWifiState.called.should.be['false'];
            adb.setDataState.called.should.be['false'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should turn on wifi', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'getNetworkConnection').returns(0);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.setNetworkConnection(2));

          case 3:
            adb.setAirplaneMode.called.should.be['false'];
            adb.broadcastAirplaneMode.called.should.be['false'];
            driver.setWifiState.calledWithExactly(true).should.be['true'];
            adb.setDataState.called.should.be['false'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should turn on data', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'getNetworkConnection').returns(0);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.setNetworkConnection(4));

          case 3:
            adb.setAirplaneMode.called.should.be['false'];
            adb.broadcastAirplaneMode.called.should.be['false'];
            driver.setWifiState.called.should.be['false'];
            adb.setDataState.calledWithExactly(true, false).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should turn on data and wifi', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'getNetworkConnection').returns(0);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.setNetworkConnection(6));

          case 3:
            adb.setAirplaneMode.called.should.be['false'];
            adb.broadcastAirplaneMode.called.should.be['false'];
            driver.setWifiState.calledWithExactly(true).should.be['true'];
            adb.setDataState.calledWithExactly(true, false).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('setWifiState', function () {
    it('should set wifi state', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.isEmulator.returns('is_emu');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.setWifiState('wifi_state'));

          case 3:
            adb.setWifiState.calledWithExactly('wifi_state', 'is_emu').should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('toggleData', function () {
    it('should toggle data', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.isDataOn.returns(false);
            driver.isEmulator.returns('is_emu');
            adb.setWifiAndData.returns('');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.toggleData());

          case 5:
            adb.setWifiAndData.calledWithExactly({ data: true }, 'is_emu').should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('toggleWiFi', function () {
    it('should toggle wifi', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.isWifiOn.returns(false);
            driver.isEmulator.returns('is_emu');
            adb.setWifiAndData.returns('');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.toggleWiFi());

          case 5:
            adb.setWifiAndData.calledWithExactly({ wifi: true }, 'is_emu').should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('toggleFlightMode', function () {
    it('should toggle flight mode', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.isAirplaneModeOn.returns(false);
            adb.setAirplaneMode.returns('');
            adb.broadcastAirplaneMode.returns('');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.toggleFlightMode());

          case 5:
            adb.setAirplaneMode.calledWithExactly(true).should.be['true'];
            adb.broadcastAirplaneMode.calledWithExactly(true).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('setGeoLocation', function () {
    it('should set location', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.setGeoLocation.withArgs('location', 'is_emu').returns('res');
            driver.isEmulator.returns('is_emu');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.setGeoLocation('location').should.become('res'));

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('toggleLocationSettings', function () {
    beforeEach(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'toggleSetting');

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error for API<16', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.getApiLevel.returns(15);
            driver.isEmulator.returns(false);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.toggleLocationServices().should.eventually.be.rejectedWith(/implemented/));

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should generate the correct sequence of keys for API 16', function callee$2$0() {
      var sequence;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sequence = [19, 19, 20];

            adb.getApiLevel.returns(16);
            driver.isEmulator.returns(false);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.toggleLocationServices());

          case 5:
            driver.toggleSetting.calledWith('LOCATION_SOURCE_SETTINGS', sequence).should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should generate the correct sequence of keys for API >= 19', function callee$2$0() {
      var sequence;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sequence = [22, 22, 19];

            adb.getApiLevel.returns(19);
            driver.isEmulator.returns(false);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.toggleLocationServices());

          case 5:
            adb.keyevent.calledWithExactly(19).should.be['true'];
            driver.toggleSetting.calledWith('LOCATION_SOURCE_SETTINGS', sequence).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should set gps for emulators', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.getApiLevel.returns(19);
            driver.isEmulator.returns(true);
            adb.getLocationProviders.returns(['wifi']);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.toggleLocationServices());

          case 5:
            adb.toggleGPSLocationProvider.calledWithExactly(true).should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('toggleSetting', function () {
    beforeEach(function () {
      sandbox.stub(driver, 'doKey').returns('');
      sandbox.stub(driver, 'openSettingsActivity').returns('');
      adb.getFocusedPackageAndActivity.returns({ appPackage: 'fpkg', appActivity: 'fact' });
    });
    it('should toggle setting', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.toggleSetting('set', [61, 72]));

          case 2:
            driver.doKey.getCall(0).args[0].should.be.equal(61);
            driver.doKey.getCall(1).args[0].should.be.equal(72);
            driver.doKey.getCall(2).args[0].should.be.equal(23);
            driver.doKey.getCall(3).args[0].should.be.equal(22);
            driver.doKey.getCall(4).args[0].should.be.equal(23);
            driver.openSettingsActivity.calledWithExactly('set').should.be['true'];
            adb.waitForNotActivity.calledTwice.should.be['true'];
            adb.waitForNotActivity.alwaysCalledWith('fpkg', 'fact').should.be['true'];
            adb.back.calledOnce.should.be['true'];

          case 11:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should use default key sequence', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.toggleSetting('set', null));

          case 2:
            driver.doKey.getCall(0).args[0].should.be.equal(19);
            driver.doKey.getCall(1).args[0].should.be.equal(19);
            driver.doKey.getCall(2).args[0].should.be.equal(20);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should skip errors from adb.waitForNotActivity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.waitForNotActivity.throws();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.toggleSetting('set', null).should.be.fulfilled);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('doKey', function () {
    it('should send key event', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.doKey(55));

          case 2:
            adb.keyevent.calledWithExactly(55).should.be['true'];

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('wrapBootstrapDisconnect', function () {
    it('should restart adb and start bootstrap', function callee$2$0() {
      var fn;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.wrapBootstrapDisconnect.restore();
            fn = sandbox.stub();

            driver.bootstrap = sandbox.stub();
            driver.bootstrap.start = sandbox.stub();
            driver.opts = { appPackage: 'pkg', disableAndroidWatchers: 'daw', acceptSslCerts: 'acert' };
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.wrapBootstrapDisconnect(fn));

          case 7:
            _sinon2['default'].assert.callOrder(fn, adb.restart, driver.bootstrap.start);
            driver.bootstrap.calledWithExactly('pkg', 'daw', 'acert');
            driver.bootstrap.ignoreUnexpectedShutdown.should.be['false'];

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9jb21tYW5kcy9uZXR3b3JrLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztvQkFBaUIsTUFBTTs7Ozs4QkFDSSxrQkFBa0I7Ozs7cUJBQzNCLE9BQU87Ozs7eUJBQ1QsWUFBWTs7OztnQkFDRixVQUFVOzs7O3dCQUN0QixVQUFVOzs7O0FBRXhCLElBQUksTUFBTSxZQUFBLENBQUM7QUFDWCxJQUFJLEdBQUcsWUFBQSxDQUFDO0FBQ1IsSUFBSSxPQUFPLEdBQUcsbUJBQU0sT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3JDLGtCQUFLLE1BQU0sRUFBRSxDQUFDO0FBQ2Qsa0JBQUssR0FBRyw2QkFBZ0IsQ0FBQzs7QUFFekIsUUFBUSxDQUFDLFNBQVMsRUFBRSxZQUFZO0FBQzlCLFlBQVUsQ0FBQzs7OztBQUNULGdCQUFNLEdBQUcsbUJBQW1CLENBQUM7QUFDN0IsYUFBRyxHQUFHLDRCQUFTLENBQUM7QUFDaEIsZ0JBQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ2pCLGlCQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2xCLGlCQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsQ0FBQztBQUNuQyxpQkFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUseUJBQXlCLENBQUMsQ0FBQyxTQUFTLENBQUMsb0JBQWdCLEVBQUU7Ozs7O21EQUNwRSxFQUFFLEVBQUU7Ozs7Ozs7V0FDWCxDQUFDLENBQUM7QUFDSCxpQkFBTyxDQUFDLElBQUksd0JBQUksT0FBTyxDQUFDLENBQUM7Ozs7Ozs7R0FDMUIsQ0FBQyxDQUFDO0FBQ0gsV0FBUyxDQUFDLFlBQVk7QUFDcEIsV0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0dBQ25CLENBQUMsQ0FBQztBQUNILFVBQVEsQ0FBQyxzQkFBc0IsRUFBRSxZQUFZO0FBQzNDLGNBQVUsQ0FBQyxZQUFZO0FBQ3JCLFNBQUcsQ0FBQyxnQkFBZ0Is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QUMzRCxDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91bml0L2NvbW1hbmRzL25ldHdvcmstc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCBzaW5vbiBmcm9tICdzaW5vbic7XG5pbXBvcnQgQURCIGZyb20gJ2FwcGl1bS1hZGInO1xuaW1wb3J0IEFuZHJvaWREcml2ZXIgZnJvbSAnLi4vLi4vLi4nO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5sZXQgZHJpdmVyO1xubGV0IGFkYjtcbmxldCBzYW5kYm94ID0gc2lub24uc2FuZGJveC5jcmVhdGUoKTtcbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmRlc2NyaWJlKCdOZXR3b3JrJywgZnVuY3Rpb24gKCkge1xuICBiZWZvcmVFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBkcml2ZXIgPSBuZXcgQW5kcm9pZERyaXZlcigpO1xuICAgIGFkYiA9IG5ldyBBREIoKTtcbiAgICBkcml2ZXIuYWRiID0gYWRiO1xuICAgIHNhbmRib3guc3R1YihhZGIpO1xuICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdpc0VtdWxhdG9yJyk7XG4gICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ3dyYXBCb290c3RyYXBEaXNjb25uZWN0JykuY2FsbHNGYWtlKGFzeW5jIGZ1bmN0aW9uIChmbikge1xuICAgICAgYXdhaXQgZm4oKTtcbiAgICB9KTtcbiAgICBzYW5kYm94LnN0dWIoQiwgJ2RlbGF5Jyk7XG4gIH0pO1xuICBhZnRlckVhY2goZnVuY3Rpb24gKCkge1xuICAgIHNhbmRib3gucmVzdG9yZSgpO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldE5ldHdvcmtDb25uZWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgYWRiLmlzQWlycGxhbmVNb2RlT24ucmV0dXJucyhmYWxzZSk7XG4gICAgICBhZGIuaXNEYXRhT24ucmV0dXJucyhmYWxzZSk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnaXNXaWZpT24nKS5yZXR1cm5zKGZhbHNlKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGRldGVybWluZSBub3RoaW5nIGVuYWJsZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0TmV0d29ya0Nvbm5lY3Rpb24oKS5zaG91bGQuZXZlbnR1YWxseS5lcXVhbCgwKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGRldGVybWluZSBhaXJwbGFuZSBtb2RlIGlzIG9uJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYWRiLmlzQWlycGxhbmVNb2RlT24ucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXROZXR3b3JrQ29ubmVjdGlvbigpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKDEpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZGV0ZXJtaW5lIHdpZmkgaXMgb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuaXNXaWZpT24ucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXROZXR3b3JrQ29ubmVjdGlvbigpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKDIpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZGV0ZXJtaW5lIGRhdGEgaXMgb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhZGIuaXNEYXRhT24ucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXROZXR3b3JrQ29ubmVjdGlvbigpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKDQpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZGV0ZXJtaW5lIHdpZmkgYW5kIGRhdGEgYXJlIG9uJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmlzV2lmaU9uLnJldHVybnModHJ1ZSk7XG4gICAgICBhZGIuaXNEYXRhT24ucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXROZXR3b3JrQ29ubmVjdGlvbigpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKDYpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2lzV2lmaU9uJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHdpZmkgc3RhdGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhZGIuaXNXaWZpT24ucmV0dXJucygnd2lmaV9zdGF0ZScpO1xuICAgICAgYXdhaXQgZHJpdmVyLmlzV2lmaU9uKCkuc2hvdWxkLmJlY29tZSgnd2lmaV9zdGF0ZScpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3NldE5ldHdvcmtDb25uZWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ3NldFdpZmlTdGF0ZScpO1xuICAgICAgZHJpdmVyLmlzRW11bGF0b3IucmV0dXJucyhmYWxzZSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0dXJuIG9mZiB3aWZpIGFuZCBkYXRhJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2dldE5ldHdvcmtDb25uZWN0aW9uJykucmV0dXJucyg2KTtcbiAgICAgIGF3YWl0IGRyaXZlci5zZXROZXR3b3JrQ29ubmVjdGlvbigwKTtcbiAgICAgIGFkYi5zZXRBaXJwbGFuZU1vZGUuY2FsbGVkLnNob3VsZC5iZS5mYWxzZTtcbiAgICAgIGFkYi5icm9hZGNhc3RBaXJwbGFuZU1vZGUuY2FsbGVkLnNob3VsZC5iZS5mYWxzZTtcbiAgICAgIGRyaXZlci5zZXRXaWZpU3RhdGUuY2FsbGVkV2l0aEV4YWN0bHkoZmFsc2UpLnNob3VsZC5iZS50cnVlO1xuICAgICAgYWRiLnNldERhdGFTdGF0ZS5jYWxsZWRXaXRoRXhhY3RseShmYWxzZSwgZmFsc2UpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdHVybiBvbiBhbmQgYnJvYWRjYXN0IGFpcnBsYW5lIG1vZGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnZ2V0TmV0d29ya0Nvbm5lY3Rpb24nKS5yZXR1cm5zKDApO1xuICAgICAgYXdhaXQgZHJpdmVyLnNldE5ldHdvcmtDb25uZWN0aW9uKDEpO1xuICAgICAgYWRiLnNldEFpcnBsYW5lTW9kZS5jYWxsZWRXaXRoRXhhY3RseSh0cnVlKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGFkYi5icm9hZGNhc3RBaXJwbGFuZU1vZGUuY2FsbGVkV2l0aEV4YWN0bHkodHJ1ZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuc2V0V2lmaVN0YXRlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBhZGIuc2V0RGF0YVN0YXRlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0dXJuIG9uIHdpZmknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnZ2V0TmV0d29ya0Nvbm5lY3Rpb24nKS5yZXR1cm5zKDApO1xuICAgICAgYXdhaXQgZHJpdmVyLnNldE5ldHdvcmtDb25uZWN0aW9uKDIpO1xuICAgICAgYWRiLnNldEFpcnBsYW5lTW9kZS5jYWxsZWQuc2hvdWxkLmJlLmZhbHNlO1xuICAgICAgYWRiLmJyb2FkY2FzdEFpcnBsYW5lTW9kZS5jYWxsZWQuc2hvdWxkLmJlLmZhbHNlO1xuICAgICAgZHJpdmVyLnNldFdpZmlTdGF0ZS5jYWxsZWRXaXRoRXhhY3RseSh0cnVlKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGFkYi5zZXREYXRhU3RhdGUuY2FsbGVkLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHR1cm4gb24gZGF0YScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdnZXROZXR3b3JrQ29ubmVjdGlvbicpLnJldHVybnMoMCk7XG4gICAgICBhd2FpdCBkcml2ZXIuc2V0TmV0d29ya0Nvbm5lY3Rpb24oNCk7XG4gICAgICBhZGIuc2V0QWlycGxhbmVNb2RlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBhZGIuYnJvYWRjYXN0QWlycGxhbmVNb2RlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBkcml2ZXIuc2V0V2lmaVN0YXRlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBhZGIuc2V0RGF0YVN0YXRlLmNhbGxlZFdpdGhFeGFjdGx5KHRydWUsIGZhbHNlKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHR1cm4gb24gZGF0YSBhbmQgd2lmaScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdnZXROZXR3b3JrQ29ubmVjdGlvbicpLnJldHVybnMoMCk7XG4gICAgICBhd2FpdCBkcml2ZXIuc2V0TmV0d29ya0Nvbm5lY3Rpb24oNik7XG4gICAgICBhZGIuc2V0QWlycGxhbmVNb2RlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBhZGIuYnJvYWRjYXN0QWlycGxhbmVNb2RlLmNhbGxlZC5zaG91bGQuYmUuZmFsc2U7XG4gICAgICBkcml2ZXIuc2V0V2lmaVN0YXRlLmNhbGxlZFdpdGhFeGFjdGx5KHRydWUpLnNob3VsZC5iZS50cnVlO1xuICAgICAgYWRiLnNldERhdGFTdGF0ZS5jYWxsZWRXaXRoRXhhY3RseSh0cnVlLCBmYWxzZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnc2V0V2lmaVN0YXRlJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgc2V0IHdpZmkgc3RhdGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuaXNFbXVsYXRvci5yZXR1cm5zKCdpc19lbXUnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5zZXRXaWZpU3RhdGUoJ3dpZmlfc3RhdGUnKTtcbiAgICAgIGFkYi5zZXRXaWZpU3RhdGUuY2FsbGVkV2l0aEV4YWN0bHkoJ3dpZmlfc3RhdGUnLCAnaXNfZW11Jykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgndG9nZ2xlRGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHRvZ2dsZSBkYXRhJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYWRiLmlzRGF0YU9uLnJldHVybnMoZmFsc2UpO1xuICAgICAgZHJpdmVyLmlzRW11bGF0b3IucmV0dXJucygnaXNfZW11Jyk7XG4gICAgICBhZGIuc2V0V2lmaUFuZERhdGEucmV0dXJucygnJyk7XG4gICAgICBhd2FpdCBkcml2ZXIudG9nZ2xlRGF0YSgpO1xuICAgICAgYWRiLnNldFdpZmlBbmREYXRhLmNhbGxlZFdpdGhFeGFjdGx5KHtkYXRhOiB0cnVlfSwgJ2lzX2VtdScpXG4gICAgICAgIC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCd0b2dnbGVXaUZpJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgdG9nZ2xlIHdpZmknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhZGIuaXNXaWZpT24ucmV0dXJucyhmYWxzZSk7XG4gICAgICBkcml2ZXIuaXNFbXVsYXRvci5yZXR1cm5zKCdpc19lbXUnKTtcbiAgICAgIGFkYi5zZXRXaWZpQW5kRGF0YS5yZXR1cm5zKCcnKTtcbiAgICAgIGF3YWl0IGRyaXZlci50b2dnbGVXaUZpKCk7XG4gICAgICBhZGIuc2V0V2lmaUFuZERhdGEuY2FsbGVkV2l0aEV4YWN0bHkoe3dpZmk6IHRydWV9LCAnaXNfZW11JylcbiAgICAgICAgLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3RvZ2dsZUZsaWdodE1vZGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCB0b2dnbGUgZmxpZ2h0IG1vZGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhZGIuaXNBaXJwbGFuZU1vZGVPbi5yZXR1cm5zKGZhbHNlKTtcbiAgICAgIGFkYi5zZXRBaXJwbGFuZU1vZGUucmV0dXJucygnJyk7XG4gICAgICBhZGIuYnJvYWRjYXN0QWlycGxhbmVNb2RlLnJldHVybnMoJycpO1xuICAgICAgYXdhaXQgZHJpdmVyLnRvZ2dsZUZsaWdodE1vZGUoKTtcbiAgICAgIGFkYi5zZXRBaXJwbGFuZU1vZGUuY2FsbGVkV2l0aEV4YWN0bHkodHJ1ZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBhZGIuYnJvYWRjYXN0QWlycGxhbmVNb2RlLmNhbGxlZFdpdGhFeGFjdGx5KHRydWUpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3NldEdlb0xvY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgc2V0IGxvY2F0aW9uJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYWRiLnNldEdlb0xvY2F0aW9uLndpdGhBcmdzKCdsb2NhdGlvbicsICdpc19lbXUnKS5yZXR1cm5zKCdyZXMnKTtcbiAgICAgIGRyaXZlci5pc0VtdWxhdG9yLnJldHVybnMoJ2lzX2VtdScpO1xuICAgICAgYXdhaXQgZHJpdmVyLnNldEdlb0xvY2F0aW9uKCdsb2NhdGlvbicpLnNob3VsZC5iZWNvbWUoJ3JlcycpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3RvZ2dsZUxvY2F0aW9uU2V0dGluZ3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgYmVmb3JlRWFjaChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAndG9nZ2xlU2V0dGluZycpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgZm9yIEFQSTwxNicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFkYi5nZXRBcGlMZXZlbC5yZXR1cm5zKDE1KTtcbiAgICAgIGRyaXZlci5pc0VtdWxhdG9yLnJldHVybnMoZmFsc2UpO1xuICAgICAgYXdhaXQgZHJpdmVyLnRvZ2dsZUxvY2F0aW9uU2VydmljZXMoKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoL2ltcGxlbWVudGVkLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSB0aGUgY29ycmVjdCBzZXF1ZW5jZSBvZiBrZXlzIGZvciBBUEkgMTYnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc2VxdWVuY2UgPSBbMTksIDE5LCAyMF07XG4gICAgICBhZGIuZ2V0QXBpTGV2ZWwucmV0dXJucygxNik7XG4gICAgICBkcml2ZXIuaXNFbXVsYXRvci5yZXR1cm5zKGZhbHNlKTtcbiAgICAgIGF3YWl0IGRyaXZlci50b2dnbGVMb2NhdGlvblNlcnZpY2VzKCk7XG4gICAgICBkcml2ZXIudG9nZ2xlU2V0dGluZy5jYWxsZWRXaXRoKCdMT0NBVElPTl9TT1VSQ0VfU0VUVElOR1MnLCBzZXF1ZW5jZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSB0aGUgY29ycmVjdCBzZXF1ZW5jZSBvZiBrZXlzIGZvciBBUEkgPj0gMTknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc2VxdWVuY2UgPSBbMjIsIDIyLCAxOV07XG4gICAgICBhZGIuZ2V0QXBpTGV2ZWwucmV0dXJucygxOSk7XG4gICAgICBkcml2ZXIuaXNFbXVsYXRvci5yZXR1cm5zKGZhbHNlKTtcbiAgICAgIGF3YWl0IGRyaXZlci50b2dnbGVMb2NhdGlvblNlcnZpY2VzKCk7XG4gICAgICBhZGIua2V5ZXZlbnQuY2FsbGVkV2l0aEV4YWN0bHkoMTkpLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLnRvZ2dsZVNldHRpbmcuY2FsbGVkV2l0aCgnTE9DQVRJT05fU09VUkNFX1NFVFRJTkdTJywgc2VxdWVuY2UpXG4gICAgICAgIC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHNldCBncHMgZm9yIGVtdWxhdG9ycycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFkYi5nZXRBcGlMZXZlbC5yZXR1cm5zKDE5KTtcbiAgICAgIGRyaXZlci5pc0VtdWxhdG9yLnJldHVybnModHJ1ZSk7XG4gICAgICBhZGIuZ2V0TG9jYXRpb25Qcm92aWRlcnMucmV0dXJucyhbJ3dpZmknXSk7XG4gICAgICBhd2FpdCBkcml2ZXIudG9nZ2xlTG9jYXRpb25TZXJ2aWNlcygpO1xuICAgICAgYWRiLnRvZ2dsZUdQU0xvY2F0aW9uUHJvdmlkZXIuY2FsbGVkV2l0aEV4YWN0bHkodHJ1ZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgndG9nZ2xlU2V0dGluZycsIGZ1bmN0aW9uICgpIHtcbiAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdkb0tleScpLnJldHVybnMoJycpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ29wZW5TZXR0aW5nc0FjdGl2aXR5JykucmV0dXJucygnJyk7XG4gICAgICBhZGIuZ2V0Rm9jdXNlZFBhY2thZ2VBbmRBY3Rpdml0eVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZTogJ2Zwa2cnLCBhcHBBY3Rpdml0eTonZmFjdCd9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRvZ2dsZSBzZXR0aW5nJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgZHJpdmVyLnRvZ2dsZVNldHRpbmcoJ3NldCcsIFs2MSwgNzJdKTtcbiAgICAgIGRyaXZlci5kb0tleS5nZXRDYWxsKDApLmFyZ3NbMF0uc2hvdWxkLmJlLmVxdWFsKDYxKTtcbiAgICAgIGRyaXZlci5kb0tleS5nZXRDYWxsKDEpLmFyZ3NbMF0uc2hvdWxkLmJlLmVxdWFsKDcyKTtcbiAgICAgIGRyaXZlci5kb0tleS5nZXRDYWxsKDIpLmFyZ3NbMF0uc2hvdWxkLmJlLmVxdWFsKDIzKTtcbiAgICAgIGRyaXZlci5kb0tleS5nZXRDYWxsKDMpLmFyZ3NbMF0uc2hvdWxkLmJlLmVxdWFsKDIyKTtcbiAgICAgIGRyaXZlci5kb0tleS5nZXRDYWxsKDQpLmFyZ3NbMF0uc2hvdWxkLmJlLmVxdWFsKDIzKTtcbiAgICAgIGRyaXZlci5vcGVuU2V0dGluZ3NBY3Rpdml0eS5jYWxsZWRXaXRoRXhhY3RseSgnc2V0Jykuc2hvdWxkLmJlLnRydWU7XG4gICAgICBhZGIud2FpdEZvck5vdEFjdGl2aXR5LmNhbGxlZFR3aWNlLnNob3VsZC5iZS50cnVlO1xuICAgICAgYWRiLndhaXRGb3JOb3RBY3Rpdml0eS5hbHdheXNDYWxsZWRXaXRoKCdmcGtnJywgJ2ZhY3QnKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGFkYi5iYWNrLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB1c2UgZGVmYXVsdCBrZXkgc2VxdWVuY2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBkcml2ZXIudG9nZ2xlU2V0dGluZygnc2V0JywgbnVsbCk7XG4gICAgICBkcml2ZXIuZG9LZXkuZ2V0Q2FsbCgwKS5hcmdzWzBdLnNob3VsZC5iZS5lcXVhbCgxOSk7XG4gICAgICBkcml2ZXIuZG9LZXkuZ2V0Q2FsbCgxKS5hcmdzWzBdLnNob3VsZC5iZS5lcXVhbCgxOSk7XG4gICAgICBkcml2ZXIuZG9LZXkuZ2V0Q2FsbCgyKS5hcmdzWzBdLnNob3VsZC5iZS5lcXVhbCgyMCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBza2lwIGVycm9ycyBmcm9tIGFkYi53YWl0Rm9yTm90QWN0aXZpdHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhZGIud2FpdEZvck5vdEFjdGl2aXR5LnRocm93cygpO1xuICAgICAgYXdhaXQgZHJpdmVyLnRvZ2dsZVNldHRpbmcoJ3NldCcsIG51bGwpLnNob3VsZC5iZS5mdWxmaWxsZWQ7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZG9LZXknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBzZW5kIGtleSBldmVudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGRyaXZlci5kb0tleSg1NSk7XG4gICAgICBhZGIua2V5ZXZlbnQuY2FsbGVkV2l0aEV4YWN0bHkoNTUpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3dyYXBCb290c3RyYXBEaXNjb25uZWN0JywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmVzdGFydCBhZGIgYW5kIHN0YXJ0IGJvb3RzdHJhcCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci53cmFwQm9vdHN0cmFwRGlzY29ubmVjdC5yZXN0b3JlKCk7XG4gICAgICBsZXQgZm4gPSBzYW5kYm94LnN0dWIoKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAgPSBzYW5kYm94LnN0dWIoKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuc3RhcnQgPSBzYW5kYm94LnN0dWIoKTtcbiAgICAgIGRyaXZlci5vcHRzID0ge2FwcFBhY2thZ2U6ICdwa2cnLCBkaXNhYmxlQW5kcm9pZFdhdGNoZXJzOiAnZGF3JywgYWNjZXB0U3NsQ2VydHM6ICdhY2VydCd9O1xuICAgICAgYXdhaXQgZHJpdmVyLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGZuKTtcbiAgICAgIHNpbm9uLmFzc2VydC5jYWxsT3JkZXIoZm4sIGFkYi5yZXN0YXJ0LCBkcml2ZXIuYm9vdHN0cmFwLnN0YXJ0KTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuY2FsbGVkV2l0aEV4YWN0bHkoJ3BrZycsICdkYXcnLCAnYWNlcnQnKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuaWdub3JlVW5leHBlY3RlZFNodXRkb3duLnNob3VsZC5iZS5mYWxzZTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==
