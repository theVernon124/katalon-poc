'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _Object$assign = require('babel-runtime/core-js/object/assign')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _interopRequireWildcard = require('babel-runtime/helpers/interop-require-wildcard')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _libAndroidHelpers = require('../../lib/android-helpers');

var _libAndroidHelpers2 = _interopRequireDefault(_libAndroidHelpers);

var _appiumAdb = require('appium-adb');

var _appiumAdb2 = _interopRequireDefault(_appiumAdb);

var _appiumTestSupport = require('appium-test-support');

var _teen_process = require('teen_process');

var teen_process = _interopRequireWildcard(_teen_process);

var _appiumSupport = require('appium-support');

var _appiumUnlock = require('appium-unlock');

var _libUnlockHelpers = require('../../lib/unlock-helpers');

var _libUnlockHelpers2 = _interopRequireDefault(_libUnlockHelpers);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var should = _chai2['default'].should();
var REMOTE_TEMP_PATH = "/data/local/tmp";
_chai2['default'].use(_chaiAsPromised2['default']);

describe('Android Helpers', function () {
  var adb = new _appiumAdb2['default']();
  describe('parseJavaVersion', function () {
    it('should correctly parse java version', function () {
      _libAndroidHelpers2['default'].parseJavaVersion('java version "1.8.0_40"\n        Java(TM) SE Runtime Environment (build 1.8.0_40-b27)').should.be.equal("1.8.0_40");
    });
    it('should return null if it cannot parse java verstion', function () {
      should.not.exist(_libAndroidHelpers2['default'].parseJavaVersion('foo bar'));
    });
    it('should parse OpenJDK versioning', function () {
      _libAndroidHelpers2['default'].parseJavaVersion('openjdk version 1.8').should.be.equal('1.8');
    });
  });

  describe('getJavaVersion', (0, _appiumTestSupport.withMocks)({ teen_process: teen_process }, function (mocks) {
    it('should correctly get java version', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.teen_process.expects('exec').withExactArgs('java', ['-version']).returns({ stderr: 'java version "1.8.0_40"' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getJavaVersion());

          case 3:
            context$3$0.sent.should.equal('1.8.0_40');

            mocks.teen_process.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return null if it cannot parse java verstion', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.teen_process.expects('exec').withExactArgs('java', ['-version']).returns({ stderr: 'foo bar' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getJavaVersion().should.eventually.be.rejectedWith('Java'));

          case 3:
            mocks.teen_process.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('prepareEmulator', (0, _appiumTestSupport.withMocks)({ adb: adb, helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    var opts = { avd: "foo@bar", avdArgs: "", language: "en", locale: "us" };
    it('should not launch avd if one is already running', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getRunningAVD').withExactArgs('foobar').returns("foo");
            mocks.adb.expects('launchAVD').never();
            mocks.adb.expects('killEmulator').never();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].prepareEmulator(adb, opts));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should launch avd if one is already running', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getRunningAVD').withExactArgs('foobar').returns(null);
            mocks.adb.expects('launchAVD').withExactArgs('foo@bar', '', 'en', 'us', undefined, undefined).returns("");
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].prepareEmulator(adb, opts));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should kill emulator if avdArgs contains -wipe-data', function callee$2$0() {
      var opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            opts = { avd: "foo@bar", avdArgs: "-wipe-data" };

            mocks.adb.expects('getRunningAVD').withExactArgs('foobar').returns('foo');
            mocks.adb.expects('killEmulator').withExactArgs('foobar').once();
            mocks.adb.expects('launchAVD').once();
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].prepareEmulator(adb, opts));

          case 6:
            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should fail if avd name is not specified', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].prepareEmulator(adb, {}).should.eventually.be.rejected);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('prepareAVDArgs', (0, _appiumTestSupport.withMocks)({ adb: adb, helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    it('should set the correct avdArgs', function callee$2$0() {
      var avdArgs;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            avdArgs = '-wipe-data';

            _libAndroidHelpers2['default'].prepareAVDArgs({}, adb, avdArgs).should.equal(avdArgs);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should add headless arg', function callee$2$0() {
      var avdArgs, args;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            avdArgs = '-wipe-data';
            args = _libAndroidHelpers2['default'].prepareAVDArgs({ isHeadless: true }, adb, avdArgs);

            args.should.have.string('-wipe-data');
            args.should.have.string('-no-window');

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should add network speed arg', function callee$2$0() {
      var avdArgs, args;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            avdArgs = '-wipe-data';

            mocks.helpers.expects('ensureNetworkSpeed').once().returns('edge');
            args = _libAndroidHelpers2['default'].prepareAVDArgs({ networkSpeed: 'edge' }, adb, avdArgs);

            args.should.have.string('-wipe-data');
            args.should.have.string('-netspeed edge');
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not include empty avdArgs', function callee$2$0() {
      var avdArgs, args;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            avdArgs = '';
            args = _libAndroidHelpers2['default'].prepareAVDArgs({ isHeadless: true }, adb, avdArgs);

            args.should.eql('-no-window');

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('ensureNetworkSpeed', function () {
    it('should return value if network speed is valid', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.NETWORK_SPEED = { GSM: 'gsm' };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].ensureNetworkSpeed(adb, 'gsm').should.be.equal('gsm'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return ADB.NETWORK_SPEED.FULL if network speed is invalid', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            adb.NETWORK_SPEED = { FULL: 'full' };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].ensureNetworkSpeed(adb, 'invalid').should.be.equal('full'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('ensureDeviceLocale', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should call setDeviceLanguageCountry', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('setDeviceLanguageCountry').withExactArgs('en', 'US').once();
            mocks.adb.expects('ensureCurrentLocale').withExactArgs('en', 'US').once().returns(true);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].ensureDeviceLocale(adb, 'en', 'US'));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should never call setDeviceLanguageCountry', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('setDeviceLanguageCountry').never();
            mocks.adb.expects('getApiLevel').never();
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].ensureDeviceLocale(adb));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call setDeviceLanguageCountry with throw', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('setDeviceLanguageCountry').withExactArgs('fr', 'FR').once();
            mocks.adb.expects('ensureCurrentLocale').withExactArgs('fr', 'FR').once().returns(false);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].ensureDeviceLocale(adb, 'fr', 'FR').should.eventually.be.rejectedWith(Error, 'Failed to set language: fr and country: FR'));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));

  describe('getDeviceInfoFromCaps', function () {
    // list of device/emu udids to their os versions
    // using list instead of map to preserve order
    var devices = [{ udid: 'emulator-1234', os: '4.9.2' }, { udid: 'rotalume-1339', os: '5.1.5' }, { udid: 'rotalume-1338', os: '5.0.1' }, { udid: 'rotalume-1337', os: '5.0.1' }, { udid: 'roamulet-9000', os: '6.0' }, { udid: 'roamulet-0', os: '2.3' }, { udid: '0123456789', os: 'wellhellothere' }];
    var curDeviceId = '';

    before(function () {
      _sinon2['default'].stub(_appiumAdb2['default'], 'createADB').callsFake(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          var _this = this;

          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              return context$4$0.abrupt('return', {
                getDevicesWithRetry: function getDevicesWithRetry() {
                  return _regeneratorRuntime.async(function getDevicesWithRetry$(context$5$0) {
                    while (1) switch (context$5$0.prev = context$5$0.next) {
                      case 0:
                        return context$5$0.abrupt('return', _lodash2['default'].map(devices, function (device) {
                          return { udid: device.udid };
                        }));

                      case 1:
                      case 'end':
                        return context$5$0.stop();
                    }
                  }, null, _this);
                },
                getPortFromEmulatorString: function getPortFromEmulatorString() {
                  return 1234;
                },
                getRunningAVD: function getRunningAVD() {
                  return { udid: 'emulator-1234', port: 1234 };
                },
                setDeviceId: function setDeviceId(udid) {
                  curDeviceId = udid;
                },
                getPlatformVersion: function getPlatformVersion() {
                  return _lodash2['default'].filter(devices, { udid: curDeviceId })[0].os;
                },
                curDeviceId: 'emulator-1234',
                emulatorPort: 1234
              });

            case 1:
            case 'end':
              return context$4$0.stop();
          }
        }, null, this);
      });
    });

    after(function () {
      _appiumAdb2['default'].createADB.restore();
    });

    it('should throw error when udid not in list', function callee$2$0() {
      var caps;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              udid: 'foomulator'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps).should.be.rejectedWith('foomulator'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get deviceId and emPort when udid is present', function callee$2$0() {
      var caps, _ref, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              udid: 'emulator-1234'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps));

          case 3:
            _ref = context$3$0.sent;
            udid = _ref.udid;
            emPort = _ref.emPort;

            udid.should.equal('emulator-1234');
            emPort.should.equal(1234);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get first deviceId and emPort if avd, platformVersion, and udid aren\'t given', function callee$2$0() {
      var _ref2, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps());

          case 2:
            _ref2 = context$3$0.sent;
            udid = _ref2.udid;
            emPort = _ref2.emPort;

            udid.should.equal('emulator-1234');
            emPort.should.equal(1234);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get deviceId and emPort when avd is present', function callee$2$0() {
      var caps, _ref3, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              avd: 'AVD_NAME'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps));

          case 3:
            _ref3 = context$3$0.sent;
            udid = _ref3.udid;
            emPort = _ref3.emPort;

            udid.should.equal('emulator-1234');
            emPort.should.equal(1234);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should fail if the given platformVersion is not found', function callee$2$0() {
      var caps;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              platformVersion: '1234567890'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps).should.be.rejectedWith('Unable to find an active device or emulator with OS 1234567890'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get deviceId and emPort if platformVersion is found and unique', function callee$2$0() {
      var caps, _ref4, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              platformVersion: '6.0'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps));

          case 3:
            _ref4 = context$3$0.sent;
            udid = _ref4.udid;
            emPort = _ref4.emPort;

            udid.should.equal('roamulet-9000');
            emPort.should.equal(1234);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the first deviceId and emPort if platformVersion is found multiple times', function callee$2$0() {
      var caps, _ref5, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              platformVersion: '5.0.1'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps));

          case 3:
            _ref5 = context$3$0.sent;
            udid = _ref5.udid;
            emPort = _ref5.emPort;

            udid.should.equal('rotalume-1338');
            emPort.should.equal(1234);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the first deviceId and emPort if platformVersion is found multiple times and is a partial match', function callee$2$0() {
      var caps, _ref6, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              platformVersion: '5.0'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps));

          case 3:
            _ref6 = context$3$0.sent;
            udid = _ref6.udid;
            emPort = _ref6.emPort;

            udid.should.equal('rotalume-1338');
            emPort.should.equal(1234);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get deviceId and emPort by udid if udid and platformVersion are given', function callee$2$0() {
      var caps, _ref7, udid, emPort;

      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            caps = {
              udid: '0123456789',
              platformVersion: '2.3'
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getDeviceInfoFromCaps(caps));

          case 3:
            _ref7 = context$3$0.sent;
            udid = _ref7.udid;
            emPort = _ref7.emPort;

            udid.should.equal('0123456789');
            emPort.should.equal(1234);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('createADB', function () {
    var curDeviceId = '';
    var emulatorPort = -1;
    before(function () {
      _sinon2['default'].stub(_appiumAdb2['default'], 'createADB').callsFake(function callee$3$0() {
        return _regeneratorRuntime.async(function callee$3$0$(context$4$0) {
          while (1) switch (context$4$0.prev = context$4$0.next) {
            case 0:
              return context$4$0.abrupt('return', {
                setDeviceId: function setDeviceId(udid) {
                  curDeviceId = udid;
                },
                setEmulatorPort: function setEmulatorPort(emPort) {
                  emulatorPort = emPort;
                }
              });

            case 1:
            case 'end':
              return context$4$0.stop();
          }
        }, null, this);
      });
    });
    after(function () {
      _appiumAdb2['default'].createADB.restore();
    });
    it('should create adb and set device id and emulator port', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].createADB("1.7", "111222", "111", "222", true, "remote_host", true));

          case 2:
            _appiumAdb2['default'].createADB.calledWithExactly({
              javaVersion: "1.7",
              adbPort: "222",
              suppressKillServer: true,
              remoteAdbHost: "remote_host",
              clearDeviceLogsOnStart: true
            }).should.be['true'];
            curDeviceId.should.equal("111222");
            emulatorPort.should.equal("111");

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not set emulator port if emPort is undefined', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            emulatorPort = 5555;
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].createADB());

          case 3:
            emulatorPort.should.equal(5555);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getLaunchInfoFromManifest', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should return when no app present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('packageAndLaunchActivityFromManifest').never();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getLaunchInfo(adb, {}));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return when appPackage & appActivity are already present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('packageAndLaunchActivityFromManifest').never();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getLaunchInfo(adb, { app: "foo", appPackage: "bar",
              appActivity: "act" }));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return package and launch activity from manifest', function callee$2$0() {
      var result;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('packageAndLaunchActivityFromManifest').withExactArgs('foo').returns({ apkPackage: 'pkg', apkActivity: 'ack' });
            result = { appPackage: 'pkg', appWaitPackage: 'pkg',
              appActivity: 'ack', appWaitActivity: 'ack' };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getLaunchInfo(adb, { app: "foo" }));

          case 4:
            context$3$0.t0 = result;
            context$3$0.sent.should.deep.equal(context$3$0.t0);

            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not override appPackage, appWaitPackage, appActivity, appWaitActivity ' + 'from manifest if they are allready defined in opts', function callee$2$0() {
      var optsFromManifest, inOpts, outOpts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            optsFromManifest = { apkPackage: 'mpkg', apkActivity: 'mack' };

            mocks.adb.expects('packageAndLaunchActivityFromManifest').withExactArgs('foo').twice().returns(optsFromManifest);

            inOpts = { app: 'foo', appActivity: 'ack', appWaitPackage: 'wpkg', appWaitActivity: 'wack' };
            outOpts = { appPackage: 'mpkg', appActivity: 'ack', appWaitPackage: 'wpkg', appWaitActivity: 'wack' };
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getLaunchInfo(adb, inOpts));

          case 6:
            context$3$0.t0 = outOpts;
            context$3$0.sent.should.deep.equal(context$3$0.t0);

            inOpts = { app: 'foo', appPackage: 'pkg', appWaitPackage: 'wpkg', appWaitActivity: 'wack' };
            outOpts = { appPackage: 'pkg', appActivity: 'mack', appWaitPackage: 'wpkg', appWaitActivity: 'wack' };
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].getLaunchInfo(adb, inOpts));

          case 12:
            context$3$0.t1 = outOpts;
            context$3$0.sent.should.deep.equal(context$3$0.t1);

            mocks.adb.verify();

          case 15:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('resetApp', (0, _appiumTestSupport.withMocks)({ adb: adb, helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    var localApkPath = 'local';
    var pkg = 'pkg';
    it('should complain if opts arent passed correctly', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].resetApp(adb, {}).should.eventually.be.rejectedWith(/appPackage/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should be able to do full reset', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('install').once().withArgs(localApkPath);
            mocks.adb.expects('forceStop').withExactArgs(pkg).once();
            mocks.adb.expects('isAppInstalled').once().withExactArgs(pkg).returns(true);
            mocks.adb.expects('uninstallApk').once().withExactArgs(pkg);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].resetApp(adb, { app: localApkPath, appPackage: pkg }));

          case 6:
            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should be able to do fast reset', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isAppInstalled').once().withExactArgs(pkg).returns(true);
            mocks.adb.expects('forceStop').withExactArgs(pkg).once();
            mocks.adb.expects('clear').withExactArgs(pkg).once().returns('Success');
            mocks.adb.expects('grantAllPermissions').once().withExactArgs(pkg);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].resetApp(adb, { app: localApkPath, appPackage: pkg, fastReset: true, autoGrantPermissions: true }));

          case 6:
            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should perform reinstall if app is not installed and fast reset is requested', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isAppInstalled').once().withExactArgs(pkg).returns(false);
            mocks.adb.expects('forceStop').withExactArgs(pkg).never();
            mocks.adb.expects('clear').withExactArgs(pkg).never();
            mocks.adb.expects('uninstallApk').never();
            mocks.adb.expects('install').once().withArgs(localApkPath);
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].resetApp(adb, { app: localApkPath, appPackage: pkg, fastReset: true }));

          case 7:
            mocks.adb.verify();

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));

  describe('installApk', (0, _appiumTestSupport.withMocks)({ adb: adb, fs: _appiumSupport.fs, helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    //use mock appium capabilities for this test
    var opts = {
      app: 'local',
      appPackage: 'pkg',
      androidInstallTimeout: 90000
    };
    it('should complain if appPackage is not passed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installApk(adb, {}).should.eventually.be.rejectedWith(/appPackage/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should install/upgrade and reset app if fast reset is set to true', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isAppInstalled').once().returns(true);
            mocks.adb.expects('installOrUpgrade').once().withArgs(opts.app, opts.appPackage);
            mocks.helpers.expects('resetApp').once().withArgs(adb);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installApk(adb, _Object$assign({}, opts, { fastReset: true })));

          case 5:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should reinstall app if full reset is set to true', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').never();
            mocks.helpers.expects('resetApp').once().withArgs(adb);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installApk(adb, _Object$assign({}, opts, { fastReset: true, fullReset: true })));

          case 4:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not run reset if the corresponding option is not set', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').once().withArgs(opts.app, opts.appPackage);
            mocks.helpers.expects('resetApp').never();
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installApk(adb, opts));

          case 4:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should install/upgrade and skip fast reseting the app if this was the fresh install', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isAppInstalled').once().returns(false);
            mocks.adb.expects('installOrUpgrade').once().withArgs(opts.app, opts.appPackage);
            mocks.helpers.expects('resetApp').never();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installApk(adb, _Object$assign({}, opts, { fastReset: true })));

          case 5:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('installOtherApks', (0, _appiumTestSupport.withMocks)({ adb: adb, fs: _appiumSupport.fs, helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    var opts = {
      app: 'local',
      appPackage: 'pkg',
      androidInstallTimeout: 90000
    };

    var fakeApk = '/path/to/fake/app.apk';
    var otherFakeApk = '/path/to/other/fake/app.apk';

    var expectedADBInstallOpts = {
      grantPermissions: undefined,
      timeout: opts.androidInstallTimeout
    };

    it('should not call adb.installOrUpgrade if otherApps is empty', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').never();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installOtherApks([], adb, opts));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call adb.installOrUpgrade once if otherApps has one item', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').once().withArgs(fakeApk, null, expectedADBInstallOpts);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installOtherApks([fakeApk], adb, opts));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call adb.installOrUpgrade twice if otherApps has two item', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').twice();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].installOtherApks([fakeApk, otherFakeApk], adb, opts));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('initUnicodeKeyboard', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should install and enable unicodeIME', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('install').once().returns('');
            mocks.adb.expects('defaultIME').once().returns('defaultIME');
            mocks.adb.expects('enableIME').once().returns('');
            mocks.adb.expects('setIME').once().returns('');
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].initUnicodeKeyboard(adb));

          case 6:
            mocks.adb.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('pushSettingsApp', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should skip granting permissions if the app is already running', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').once().returns(true);
            mocks.adb.expects('processExists').withExactArgs('io.appium.settings').once().returns(true);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].pushSettingsApp(adb));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should launch settings app if it isnt running', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').once().returns(true);
            mocks.adb.expects('processExists').once().returns(false);
            mocks.adb.expects('startApp').once();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].pushSettingsApp(adb));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('setMockLocationApp', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should enable mock location for api level below 23', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApiLevel').returns(_bluebird2['default'].resolve(18));
            mocks.adb.expects('shell').withExactArgs(['settings', 'put', 'secure', 'mock_location', '1']).once().returns('');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].setMockLocationApp(adb, 'io.appium.settings'));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should enable mock location for api level 23 and above', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('getApiLevel').returns(_bluebird2['default'].resolve(23));
            mocks.adb.expects('shell').withExactArgs(['appops', 'set', 'io.appium.settings', 'android:mock_location', 'allow']).once().returns('');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].setMockLocationApp(adb, 'io.appium.settings'));

          case 4:
            mocks.adb.verify();

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('pushUnlock', (0, _appiumTestSupport.withMocks)({ adb: adb }, function (mocks) {
    it('should install unlockApp', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('installOrUpgrade').withArgs(_appiumUnlock.path, 'io.appium.unlock').once().returns('');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].pushUnlock(adb));

          case 3:
            mocks.adb.verify();

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('pushStrings', (0, _appiumTestSupport.withMocks)({ adb: adb, fs: _appiumSupport.fs }, function (mocks) {
    var opts = { app: 'app', tmpDir: '/tmp_dir', appPackage: 'pkg' };
    it('should extracts string.xml and converts it to string.json and pushes it', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('rimraf').withExactArgs(REMOTE_TEMP_PATH + '/strings.json').once();
            mocks.fs.expects('exists').withExactArgs(opts.app).returns(true);
            mocks.fs.expects('rimraf').once();
            mocks.adb.expects('extractStringsFromApk').withArgs(opts.app, 'en').returns({ apkStrings: { id: 'string' }, localPath: 'local_path' });
            mocks.adb.expects('push').withExactArgs('local_path', REMOTE_TEMP_PATH).once();
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].pushStrings('en', adb, opts));

          case 7:
            context$3$0.t0 = { id: 'string' };
            context$3$0.sent.should.be.deep.equal(context$3$0.t0);

            mocks.adb.verify();

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should delete remote strings.json if app is not present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('rimraf').withExactArgs(REMOTE_TEMP_PATH + '/strings.json').once();
            mocks.fs.expects('exists').withExactArgs(opts.app).returns(false);
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].pushStrings('en', adb, opts));

          case 4:
            context$3$0.t0 = {};
            context$3$0.sent.should.be.deep.equal(context$3$0.t0);

            mocks.adb.verify();
            mocks.fs.verify();

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should push an empty json object if app does not have strings.xml', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('rimraf').withExactArgs(REMOTE_TEMP_PATH + '/strings.json').once();
            mocks.fs.expects('exists').withExactArgs(opts.app).returns(true);
            mocks.fs.expects('rimraf').once();
            mocks.adb.expects('extractStringsFromApk').throws();
            mocks.adb.expects('shell').withExactArgs('echo', ['\'{}\' > ' + REMOTE_TEMP_PATH + '/strings.json']);
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].pushStrings('en', adb, opts));

          case 7:
            context$3$0.t0 = {};
            context$3$0.sent.should.be.deep.equal(context$3$0.t0);

            mocks.adb.verify();
            mocks.fs.verify();

          case 11:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('unlock', (0, _appiumTestSupport.withMocks)({ adb: adb, helpers: _libAndroidHelpers2['default'], unlocker: _libUnlockHelpers2['default'] }, function (mocks) {
    it('should return if screen is already unlocked', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').withExactArgs().once().returns(false);
            mocks.adb.expects('getApiLevel').never();
            mocks.adb.expects('startApp').never();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, {}));

          case 5:
            mocks.adb.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should start unlock app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').onCall(0).returns(true);
            mocks.adb.expects('forceStop').once().returns('');
            mocks.adb.expects('startApp').once().returns('');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, {}));

          case 5:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should raise an error on undefined unlockKey when unlockType is defined', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').once().returns(true);
            mocks.unlocker.expects('isValidKey').once();
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, { unlockType: "pin" }).should.be.rejectedWith('unlockKey'));

          case 4:
            mocks.adb.verify();
            mocks.unlocker.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call pinUnlock if unlockType is pin', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').onCall(0).returns(true);
            mocks.adb.expects('isScreenLocked').returns(false);
            mocks.unlocker.expects('pinUnlock').once();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, { unlockType: "pin", unlockKey: "1111" }));

          case 5:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call passwordUnlock if unlockType is password', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').onCall(0).returns(true);
            mocks.adb.expects('isScreenLocked').returns(false);
            mocks.unlocker.expects('passwordUnlock').once();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, { unlockType: "password", unlockKey: "appium" }));

          case 5:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call patternUnlock if unlockType is pattern', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').onCall(0).returns(true);
            mocks.adb.expects('isScreenLocked').returns(false);
            mocks.unlocker.expects('patternUnlock').once();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, { unlockType: "pattern", unlockKey: "123456789" }));

          case 5:
            mocks.adb.verify();
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should call fingerprintUnlock if unlockType is fingerprint', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').onCall(0).returns(true);
            mocks.adb.expects('isScreenLocked').returns(false);
            mocks.unlocker.expects('fingerprintUnlock').once();
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, { unlockType: "fingerprint", unlockKey: "1111" }));

          case 5:
            mocks.adb.verify();
            mocks.unlocker.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error is api is lower than 23 and trying to use fingerprintUnlock', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            mocks.adb.expects('isScreenLocked').onCall(0).returns(true);
            mocks.adb.expects('isScreenLocked').returns(false);
            mocks.adb.expects('getApiLevel').once().returns(21);
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].unlock(_libAndroidHelpers2['default'], adb, { unlockType: "fingerprint", unlockKey: "1111" }).should.eventually.be.rejectedWith('Fingerprint'));

          case 5:
            mocks.helpers.verify();

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('initDevice', (0, _appiumTestSupport.withMocks)({ helpers: _libAndroidHelpers2['default'], adb: adb }, function (mocks) {
    it('should init device', function callee$2$0() {
      var opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            opts = { language: "en", locale: "us" };

            mocks.adb.expects('waitForDevice').once();
            mocks.adb.expects('startLogcat').once();
            mocks.helpers.expects('pushSettingsApp').once();
            mocks.helpers.expects('ensureDeviceLocale').withExactArgs(adb, opts.language, opts.locale).once();
            mocks.helpers.expects('setMockLocationApp').withExactArgs(adb, 'io.appium.settings').once();
            mocks.helpers.expects('pushUnlock').withExactArgs(adb).once();
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].initDevice(adb, opts));

          case 9:
            mocks.helpers.verify();
            mocks.adb.verify();

          case 11:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not install settings app and mock location on emulator', function callee$2$0() {
      var opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            opts = { avd: "avd" };

            mocks.adb.expects('waitForDevice').once();
            mocks.adb.expects('startLogcat').once();
            mocks.helpers.expects('pushSettingsApp').never();
            mocks.helpers.expects('ensureDeviceLocale').withArgs(adb).once();
            mocks.helpers.expects('setMockLocationApp').never();
            mocks.helpers.expects('pushUnlock').withExactArgs(adb).once();
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].initDevice(adb, opts));

          case 9:
            mocks.helpers.verify();
            mocks.adb.verify();

          case 11:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return defaultIME if unicodeKeyboard is setted to true', function callee$2$0() {
      var opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            opts = { unicodeKeyboard: true };

            mocks.adb.expects('waitForDevice').once();
            mocks.adb.expects('startLogcat').once();
            mocks.helpers.expects('pushSettingsApp').once();
            mocks.helpers.expects('ensureDeviceLocale').once();
            mocks.helpers.expects('setMockLocationApp').once();
            mocks.helpers.expects('initUnicodeKeyboard').withExactArgs(adb).once().returns("defaultIME");
            mocks.helpers.expects('pushUnlock').withExactArgs(adb).once();
            context$3$0.next = 10;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].initDevice(adb, opts).should.become("defaultIME"));

          case 10:
            mocks.helpers.verify();
            mocks.adb.verify();

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return undefined if unicodeKeyboard is setted to false', function callee$2$0() {
      var opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            opts = { unicodeKeyboard: false };

            mocks.adb.expects('waitForDevice').once();
            mocks.adb.expects('startLogcat').once();
            mocks.helpers.expects('pushSettingsApp').once();
            mocks.helpers.expects('ensureDeviceLocale').once();
            mocks.helpers.expects('setMockLocationApp').once();
            mocks.helpers.expects('initUnicodeKeyboard').never();
            mocks.helpers.expects('pushUnlock').withExactArgs(adb).once();
            context$3$0.t0 = should.not;
            context$3$0.next = 11;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].initDevice(adb, opts));

          case 11:
            context$3$0.t1 = context$3$0.sent;
            context$3$0.t0.exist.call(context$3$0.t0, context$3$0.t1);

            mocks.helpers.verify();
            mocks.adb.verify();

          case 15:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not push unlock app if unlockType is defined', function callee$2$0() {
      var opts;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            opts = { unlockType: "unlock_type" };

            mocks.adb.expects('waitForDevice').once();
            mocks.adb.expects('startLogcat').once();
            mocks.helpers.expects('pushSettingsApp').once();
            mocks.helpers.expects('ensureDeviceLocale').once();
            mocks.helpers.expects('setMockLocationApp').once();
            mocks.helpers.expects('initUnicodeKeyboard').never();
            mocks.helpers.expects('pushUnlock').never();
            context$3$0.next = 10;
            return _regeneratorRuntime.awrap(_libAndroidHelpers2['default'].initDevice(adb, opts));

          case 10:
            mocks.helpers.verify();
            mocks.adb.verify();

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('removeNullProperties', function () {
    it('should ignore null properties', function callee$2$0() {
      var test;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            test = { foo: null, bar: true };

            _libAndroidHelpers2['default'].removeNullProperties(test);
            _lodash2['default'].keys(test).length.should.equal(1);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should ignore undefined properties', function callee$2$0() {
      var test;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            test = { foo: undefined, bar: true };

            _libAndroidHelpers2['default'].removeNullProperties(test);
            _lodash2['default'].keys(test).length.should.equal(1);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not ignore falsy properties like 0 and false', function callee$2$0() {
      var test;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            test = { foo: false, bar: true, zero: 0 };

            _libAndroidHelpers2['default'].removeNullProperties(test);
            _lodash2['default'].keys(test).length.should.equal(3);

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('truncateDecimals', function () {
    it('should use floor when number is positive', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].truncateDecimals(12.345, 2).should.equal(12.34);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should use ceil when number is negative', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].truncateDecimals(-12.345, 2).should.equal(-12.34);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getChromePkg', function () {
    it('should return pakage for chromium', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].getChromePkg('chromium').should.deep.equal({ pkg: 'org.chromium.chrome.shell', activity: '.ChromeShellActivity' });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return pakage for chromebeta', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].getChromePkg('chromebeta').should.deep.equal({ pkg: 'com.chrome.beta', activity: 'com.google.android.apps.chrome.Main' });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return pakage for browser', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].getChromePkg('browser').should.deep.equal({ pkg: 'com.android.browser', activity: 'com.android.browser.BrowserActivity' });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return pakage for chromium-browser', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].getChromePkg('chromium-browser').should.deep.equal({ pkg: 'org.chromium.chrome', activity: 'com.google.android.apps.chrome.Main' });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return pakage for chromium-webview', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            _libAndroidHelpers2['default'].getChromePkg('chromium-webview').should.deep.equal({ pkg: 'org.chromium.webview_shell', activity: 'org.chromium.webview_shell.WebViewBrowserActivity' });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });

  describe('#parseArray', function () {
    it('should parse array string to array', function () {
      _libAndroidHelpers2['default'].parseArray('["a", "b", "c"]').should.eql(['a', 'b', 'c']);
    });
    it('should parse a simple string to one item array', function () {
      _libAndroidHelpers2['default'].parseArray('abc').should.eql(['abc']);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9hbmRyb2lkLWhlbHBlci1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztxQkFDM0IsT0FBTzs7OztpQ0FDTCwyQkFBMkI7Ozs7eUJBQy9CLFlBQVk7Ozs7aUNBQ0YscUJBQXFCOzs0QkFDakIsY0FBYzs7SUFBaEMsWUFBWTs7NkJBQ0wsZ0JBQWdCOzs0QkFDRyxlQUFlOztnQ0FDaEMsMEJBQTBCOzs7O3NCQUNqQyxRQUFROzs7O3dCQUNSLFVBQVU7Ozs7QUFHeEIsSUFBTSxNQUFNLEdBQUcsa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDN0IsSUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsQ0FBQztBQUMzQyxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUd6QixRQUFRLENBQUMsaUJBQWlCLEVBQUUsWUFBWTtBQUN0QyxNQUFJLEdBQUcsR0FBRyw0QkFBUyxDQUFDO0FBQ3BCLFVBQVEsQ0FBQyxrQkFBa0IsRUFBRSxZQUFZO0FBQ3ZDLE1BQUUsQ0FBQyxxQ0FBcUMsRUFBRSxZQUFZO0FBQ3BELHFDQUFRLGdCQUFnQix5RkFDZ0MsQ0FBQyxNQUFNLENBQzVELEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDekIsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLHFEQUFxRCxFQUFFLFlBQVk7QUFDcEUsWUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsK0JBQVEsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztLQUN2RCxDQUFDLENBQUM7QUFDSCxNQUFFLENBQUMsaUNBQWlDLEVBQUUsWUFBWTtBQUNoRCxxQ0FBUSxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ3hFLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQzs7QUFFSCxVQUFRLENBQUMs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SyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7S0FDL0MsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdW5pdC9hbmRyb2lkLWhlbHBlci1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCBoZWxwZXJzIGZyb20gJy4uLy4uL2xpYi9hbmRyb2lkLWhlbHBlcnMnO1xuaW1wb3J0IEFEQiBmcm9tICdhcHBpdW0tYWRiJztcbmltcG9ydCB7IHdpdGhNb2NrcyB9IGZyb20gJ2FwcGl1bS10ZXN0LXN1cHBvcnQnO1xuaW1wb3J0ICogYXMgdGVlbl9wcm9jZXNzIGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgeyBmcyB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCB7IHBhdGggYXMgdW5sb2NrQXBrUGF0aCB9IGZyb20gJ2FwcGl1bS11bmxvY2snO1xuaW1wb3J0IHVubG9ja2VyIGZyb20gJy4uLy4uL2xpYi91bmxvY2staGVscGVycyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5cbmNvbnN0IHNob3VsZCA9IGNoYWkuc2hvdWxkKCk7XG5jb25zdCBSRU1PVEVfVEVNUF9QQVRIID0gXCIvZGF0YS9sb2NhbC90bXBcIjtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuXG5kZXNjcmliZSgnQW5kcm9pZCBIZWxwZXJzJywgZnVuY3Rpb24gKCkge1xuICBsZXQgYWRiID0gbmV3IEFEQigpO1xuICBkZXNjcmliZSgncGFyc2VKYXZhVmVyc2lvbicsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIGNvcnJlY3RseSBwYXJzZSBqYXZhIHZlcnNpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBoZWxwZXJzLnBhcnNlSmF2YVZlcnNpb24oYGphdmEgdmVyc2lvbiBcIjEuOC4wXzQwXCJcbiAgICAgICAgSmF2YShUTSkgU0UgUnVudGltZSBFbnZpcm9ubWVudCAoYnVpbGQgMS44LjBfNDAtYjI3KWApLnNob3VsZFxuICAgICAgICAuYmUuZXF1YWwoXCIxLjguMF80MFwiKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGlmIGl0IGNhbm5vdCBwYXJzZSBqYXZhIHZlcnN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgc2hvdWxkLm5vdC5leGlzdChoZWxwZXJzLnBhcnNlSmF2YVZlcnNpb24oJ2ZvbyBiYXInKSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBPcGVuSkRLIHZlcnNpb25pbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBoZWxwZXJzLnBhcnNlSmF2YVZlcnNpb24oJ29wZW5qZGsgdmVyc2lvbiAxLjgnKS5zaG91bGQuYmUuZXF1YWwoJzEuOCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0SmF2YVZlcnNpb24nLCB3aXRoTW9ja3Moe3RlZW5fcHJvY2Vzc30sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgY29ycmVjdGx5IGdldCBqYXZhIHZlcnNpb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy50ZWVuX3Byb2Nlc3MuZXhwZWN0cygnZXhlYycpLndpdGhFeGFjdEFyZ3MoJ2phdmEnLCBbJy12ZXJzaW9uJ10pXG4gICAgICAgIC5yZXR1cm5zKHtzdGRlcnI6ICdqYXZhIHZlcnNpb24gXCIxLjguMF80MFwiJ30pO1xuICAgICAgKGF3YWl0IGhlbHBlcnMuZ2V0SmF2YVZlcnNpb24oKSkuc2hvdWxkLmVxdWFsKCcxLjguMF80MCcpO1xuICAgICAgbW9ja3MudGVlbl9wcm9jZXNzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgaWYgaXQgY2Fubm90IHBhcnNlIGphdmEgdmVyc3Rpb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy50ZWVuX3Byb2Nlc3MuZXhwZWN0cygnZXhlYycpLndpdGhFeGFjdEFyZ3MoJ2phdmEnLCBbJy12ZXJzaW9uJ10pXG4gICAgICAgIC5yZXR1cm5zKHtzdGRlcnI6ICdmb28gYmFyJ30pO1xuICAgICAgYXdhaXQgaGVscGVycy5nZXRKYXZhVmVyc2lvbigpLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgnSmF2YScpO1xuICAgICAgbW9ja3MudGVlbl9wcm9jZXNzLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdwcmVwYXJlRW11bGF0b3InLCB3aXRoTW9ja3Moe2FkYiwgaGVscGVyc30sIChtb2NrcykgPT4ge1xuICAgIGNvbnN0IG9wdHMgPSB7YXZkOiBcImZvb0BiYXJcIiwgYXZkQXJnczogXCJcIiwgbGFuZ3VhZ2U6IFwiZW5cIiwgbG9jYWxlOiBcInVzXCJ9O1xuICAgIGl0KCdzaG91bGQgbm90IGxhdW5jaCBhdmQgaWYgb25lIGlzIGFscmVhZHkgcnVubmluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRSdW5uaW5nQVZEJykud2l0aEV4YWN0QXJncygnZm9vYmFyJylcbiAgICAgICAgLnJldHVybnMoXCJmb29cIik7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnbGF1bmNoQVZEJykubmV2ZXIoKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdraWxsRW11bGF0b3InKS5uZXZlcigpO1xuICAgICAgYXdhaXQgaGVscGVycy5wcmVwYXJlRW11bGF0b3IoYWRiLCBvcHRzKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGxhdW5jaCBhdmQgaWYgb25lIGlzIGFscmVhZHkgcnVubmluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRSdW5uaW5nQVZEJykud2l0aEV4YWN0QXJncygnZm9vYmFyJylcbiAgICAgICAgLnJldHVybnMobnVsbCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnbGF1bmNoQVZEJykud2l0aEV4YWN0QXJncygnZm9vQGJhcicsICcnLCAnZW4nLCAndXMnLFxuICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZClcbiAgICAgICAgLnJldHVybnMoXCJcIik7XG4gICAgICBhd2FpdCBoZWxwZXJzLnByZXBhcmVFbXVsYXRvcihhZGIsIG9wdHMpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQga2lsbCBlbXVsYXRvciBpZiBhdmRBcmdzIGNvbnRhaW5zIC13aXBlLWRhdGEnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBvcHRzID0ge2F2ZDogXCJmb29AYmFyXCIsIGF2ZEFyZ3M6IFwiLXdpcGUtZGF0YVwifTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdnZXRSdW5uaW5nQVZEJykud2l0aEV4YWN0QXJncygnZm9vYmFyJykucmV0dXJucygnZm9vJyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygna2lsbEVtdWxhdG9yJykud2l0aEV4YWN0QXJncygnZm9vYmFyJykub25jZSgpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2xhdW5jaEFWRCcpLm9uY2UoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMucHJlcGFyZUVtdWxhdG9yKGFkYiwgb3B0cyk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmYWlsIGlmIGF2ZCBuYW1lIGlzIG5vdCBzcGVjaWZpZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBoZWxwZXJzLnByZXBhcmVFbXVsYXRvcihhZGIsIHt9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZDtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgncHJlcGFyZUFWREFyZ3MnLCB3aXRoTW9ja3Moe2FkYiwgaGVscGVyc30sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgc2V0IHRoZSBjb3JyZWN0IGF2ZEFyZ3MnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgYXZkQXJncyA9ICctd2lwZS1kYXRhJztcbiAgICAgIChoZWxwZXJzLnByZXBhcmVBVkRBcmdzKHt9LCBhZGIsIGF2ZEFyZ3MpKS5zaG91bGQuZXF1YWwoYXZkQXJncyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBhZGQgaGVhZGxlc3MgYXJnJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGF2ZEFyZ3MgPSAnLXdpcGUtZGF0YSc7XG4gICAgICBsZXQgYXJncyA9IGhlbHBlcnMucHJlcGFyZUFWREFyZ3Moe2lzSGVhZGxlc3M6IHRydWV9LCBhZGIsIGF2ZEFyZ3MpO1xuICAgICAgYXJncy5zaG91bGQuaGF2ZS5zdHJpbmcoJy13aXBlLWRhdGEnKTtcbiAgICAgIGFyZ3Muc2hvdWxkLmhhdmUuc3RyaW5nKCctbm8td2luZG93Jyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBhZGQgbmV0d29yayBzcGVlZCBhcmcnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgYXZkQXJncyA9ICctd2lwZS1kYXRhJztcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygnZW5zdXJlTmV0d29ya1NwZWVkJykub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKCdlZGdlJyk7XG4gICAgICBsZXQgYXJncyA9IGhlbHBlcnMucHJlcGFyZUFWREFyZ3Moe25ldHdvcmtTcGVlZDogJ2VkZ2UnfSwgYWRiLCBhdmRBcmdzKTtcbiAgICAgIGFyZ3Muc2hvdWxkLmhhdmUuc3RyaW5nKCctd2lwZS1kYXRhJyk7XG4gICAgICBhcmdzLnNob3VsZC5oYXZlLnN0cmluZygnLW5ldHNwZWVkIGVkZ2UnKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBpbmNsdWRlIGVtcHR5IGF2ZEFyZ3MnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgYXZkQXJncyA9ICcnO1xuICAgICAgbGV0IGFyZ3MgPSBoZWxwZXJzLnByZXBhcmVBVkRBcmdzKHtpc0hlYWRsZXNzOiB0cnVlfSwgYWRiLCBhdmRBcmdzKTtcbiAgICAgIGFyZ3Muc2hvdWxkLmVxbCgnLW5vLXdpbmRvdycpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdlbnN1cmVOZXR3b3JrU3BlZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsdWUgaWYgbmV0d29yayBzcGVlZCBpcyB2YWxpZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFkYi5ORVRXT1JLX1NQRUVEID0ge0dTTTogJ2dzbSd9O1xuICAgICAgYXdhaXQgaGVscGVycy5lbnN1cmVOZXR3b3JrU3BlZWQoYWRiLCAnZ3NtJykuc2hvdWxkLmJlLmVxdWFsKCdnc20nKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBBREIuTkVUV09SS19TUEVFRC5GVUxMIGlmIG5ldHdvcmsgc3BlZWQgaXMgaW52YWxpZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGFkYi5ORVRXT1JLX1NQRUVEID0ge0ZVTEw6ICdmdWxsJ307XG4gICAgICBhd2FpdCBoZWxwZXJzLmVuc3VyZU5ldHdvcmtTcGVlZChhZGIsICdpbnZhbGlkJykuc2hvdWxkLmJlLmVxdWFsKCdmdWxsJyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZW5zdXJlRGV2aWNlTG9jYWxlJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGwgc2V0RGV2aWNlTGFuZ3VhZ2VDb3VudHJ5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NldERldmljZUxhbmd1YWdlQ291bnRyeScpLndpdGhFeGFjdEFyZ3MoJ2VuJywgJ1VTJykub25jZSgpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2Vuc3VyZUN1cnJlbnRMb2NhbGUnKS53aXRoRXhhY3RBcmdzKCdlbicsICdVUycpLm9uY2UoKS5yZXR1cm5zKHRydWUpO1xuICAgICAgYXdhaXQgaGVscGVycy5lbnN1cmVEZXZpY2VMb2NhbGUoYWRiLCAnZW4nLCAnVVMnKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5ldmVyIGNhbGwgc2V0RGV2aWNlTGFuZ3VhZ2VDb3VudHJ5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NldERldmljZUxhbmd1YWdlQ291bnRyeScpLm5ldmVyKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBpTGV2ZWwnKS5uZXZlcigpO1xuICAgICAgYXdhaXQgaGVscGVycy5lbnN1cmVEZXZpY2VMb2NhbGUoYWRiKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNhbGwgc2V0RGV2aWNlTGFuZ3VhZ2VDb3VudHJ5IHdpdGggdGhyb3cnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc2V0RGV2aWNlTGFuZ3VhZ2VDb3VudHJ5Jykud2l0aEV4YWN0QXJncygnZnInLCAnRlInKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZW5zdXJlQ3VycmVudExvY2FsZScpLndpdGhFeGFjdEFyZ3MoJ2ZyJywgJ0ZSJykub25jZSgpLnJldHVybnMoZmFsc2UpO1xuICAgICAgYXdhaXQgaGVscGVycy5lbnN1cmVEZXZpY2VMb2NhbGUoYWRiLCAnZnInLCAnRlInKS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoRXJyb3IsIGBGYWlsZWQgdG8gc2V0IGxhbmd1YWdlOiBmciBhbmQgY291bnRyeTogRlJgKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlc2NyaWJlKCdnZXREZXZpY2VJbmZvRnJvbUNhcHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gbGlzdCBvZiBkZXZpY2UvZW11IHVkaWRzIHRvIHRoZWlyIG9zIHZlcnNpb25zXG4gICAgLy8gdXNpbmcgbGlzdCBpbnN0ZWFkIG9mIG1hcCB0byBwcmVzZXJ2ZSBvcmRlclxuICAgIGxldCBkZXZpY2VzID0gW1xuICAgICAge3VkaWQ6ICdlbXVsYXRvci0xMjM0Jywgb3M6ICc0LjkuMid9LFxuICAgICAge3VkaWQ6ICdyb3RhbHVtZS0xMzM5Jywgb3M6ICc1LjEuNSd9LFxuICAgICAge3VkaWQ6ICdyb3RhbHVtZS0xMzM4Jywgb3M6ICc1LjAuMSd9LFxuICAgICAge3VkaWQ6ICdyb3RhbHVtZS0xMzM3Jywgb3M6ICc1LjAuMSd9LFxuICAgICAge3VkaWQ6ICdyb2FtdWxldC05MDAwJywgb3M6ICc2LjAnfSxcbiAgICAgIHt1ZGlkOiAncm9hbXVsZXQtMCcsIG9zOiAnMi4zJ30sXG4gICAgICB7dWRpZDogJzAxMjM0NTY3ODknLCBvczogJ3dlbGxoZWxsb3RoZXJlJ31cbiAgICBdO1xuICAgIGxldCBjdXJEZXZpY2VJZCA9ICcnO1xuXG4gICAgYmVmb3JlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNpbm9uLnN0dWIoQURCLCAnY3JlYXRlQURCJykuY2FsbHNGYWtlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBnZXREZXZpY2VzV2l0aFJldHJ5OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gXy5tYXAoZGV2aWNlcywgKGRldmljZSkgPT4geyByZXR1cm4ge3VkaWQ6IGRldmljZS51ZGlkfTsgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRQb3J0RnJvbUVtdWxhdG9yU3RyaW5nOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gMTIzNDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldFJ1bm5pbmdBVkQ6ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7dWRpZDogJ2VtdWxhdG9yLTEyMzQnLCBwb3J0OiAxMjM0fTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldERldmljZUlkOiAodWRpZCkgPT4ge1xuICAgICAgICAgICAgY3VyRGV2aWNlSWQgPSB1ZGlkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0UGxhdGZvcm1WZXJzaW9uOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gXy5maWx0ZXIoZGV2aWNlcywge3VkaWQ6IGN1ckRldmljZUlkfSlbMF0ub3M7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjdXJEZXZpY2VJZDogJ2VtdWxhdG9yLTEyMzQnLFxuICAgICAgICAgIGVtdWxhdG9yUG9ydDogMTIzNFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICBBREIuY3JlYXRlQURCLnJlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2hlbiB1ZGlkIG5vdCBpbiBsaXN0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGNhcHMgPSB7XG4gICAgICAgIHVkaWQ6ICdmb29tdWxhdG9yJ1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgaGVscGVycy5nZXREZXZpY2VJbmZvRnJvbUNhcHMoY2Fwcykuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgnZm9vbXVsYXRvcicpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IGRldmljZUlkIGFuZCBlbVBvcnQgd2hlbiB1ZGlkIGlzIHByZXNlbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgY2FwcyA9IHtcbiAgICAgICAgdWRpZDogJ2VtdWxhdG9yLTEyMzQnXG4gICAgICB9O1xuXG4gICAgICBsZXQge3VkaWQsIGVtUG9ydH0gPSBhd2FpdCBoZWxwZXJzLmdldERldmljZUluZm9Gcm9tQ2FwcyhjYXBzKTtcbiAgICAgIHVkaWQuc2hvdWxkLmVxdWFsKCdlbXVsYXRvci0xMjM0Jyk7XG4gICAgICBlbVBvcnQuc2hvdWxkLmVxdWFsKDEyMzQpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IGZpcnN0IGRldmljZUlkIGFuZCBlbVBvcnQgaWYgYXZkLCBwbGF0Zm9ybVZlcnNpb24sIGFuZCB1ZGlkIGFyZW5cXCd0IGdpdmVuJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHt1ZGlkLCBlbVBvcnR9ID0gYXdhaXQgaGVscGVycy5nZXREZXZpY2VJbmZvRnJvbUNhcHMoKTtcbiAgICAgIHVkaWQuc2hvdWxkLmVxdWFsKCdlbXVsYXRvci0xMjM0Jyk7XG4gICAgICBlbVBvcnQuc2hvdWxkLmVxdWFsKDEyMzQpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IGRldmljZUlkIGFuZCBlbVBvcnQgd2hlbiBhdmQgaXMgcHJlc2VudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBjYXBzID0ge1xuICAgICAgICBhdmQ6ICdBVkRfTkFNRSdcbiAgICAgIH07XG4gICAgICBsZXQge3VkaWQsIGVtUG9ydH0gPSBhd2FpdCBoZWxwZXJzLmdldERldmljZUluZm9Gcm9tQ2FwcyhjYXBzKTtcbiAgICAgIHVkaWQuc2hvdWxkLmVxdWFsKCdlbXVsYXRvci0xMjM0Jyk7XG4gICAgICBlbVBvcnQuc2hvdWxkLmVxdWFsKDEyMzQpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZmFpbCBpZiB0aGUgZ2l2ZW4gcGxhdGZvcm1WZXJzaW9uIGlzIG5vdCBmb3VuZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBjYXBzID0ge1xuICAgICAgICBwbGF0Zm9ybVZlcnNpb246ICcxMjM0NTY3ODkwJ1xuICAgICAgfTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuZ2V0RGV2aWNlSW5mb0Zyb21DYXBzKGNhcHMpXG4gICAgICAgIC5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKCdVbmFibGUgdG8gZmluZCBhbiBhY3RpdmUgZGV2aWNlIG9yIGVtdWxhdG9yIHdpdGggT1MgMTIzNDU2Nzg5MCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IGRldmljZUlkIGFuZCBlbVBvcnQgaWYgcGxhdGZvcm1WZXJzaW9uIGlzIGZvdW5kIGFuZCB1bmlxdWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgY2FwcyA9IHtcbiAgICAgICAgcGxhdGZvcm1WZXJzaW9uOiAnNi4wJ1xuICAgICAgfTtcbiAgICAgIGxldCB7dWRpZCwgZW1Qb3J0fSA9IGF3YWl0IGhlbHBlcnMuZ2V0RGV2aWNlSW5mb0Zyb21DYXBzKGNhcHMpO1xuICAgICAgdWRpZC5zaG91bGQuZXF1YWwoJ3JvYW11bGV0LTkwMDAnKTtcbiAgICAgIGVtUG9ydC5zaG91bGQuZXF1YWwoMTIzNCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZXQgdGhlIGZpcnN0IGRldmljZUlkIGFuZCBlbVBvcnQgaWYgcGxhdGZvcm1WZXJzaW9uIGlzIGZvdW5kIG11bHRpcGxlIHRpbWVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGNhcHMgPSB7XG4gICAgICAgIHBsYXRmb3JtVmVyc2lvbjogJzUuMC4xJ1xuICAgICAgfTtcbiAgICAgIGxldCB7dWRpZCwgZW1Qb3J0fSA9IGF3YWl0IGhlbHBlcnMuZ2V0RGV2aWNlSW5mb0Zyb21DYXBzKGNhcHMpO1xuICAgICAgdWRpZC5zaG91bGQuZXF1YWwoJ3JvdGFsdW1lLTEzMzgnKTtcbiAgICAgIGVtUG9ydC5zaG91bGQuZXF1YWwoMTIzNCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZXQgdGhlIGZpcnN0IGRldmljZUlkIGFuZCBlbVBvcnQgaWYgcGxhdGZvcm1WZXJzaW9uIGlzIGZvdW5kIG11bHRpcGxlIHRpbWVzIGFuZCBpcyBhIHBhcnRpYWwgbWF0Y2gnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgY2FwcyA9IHtcbiAgICAgICAgcGxhdGZvcm1WZXJzaW9uOiAnNS4wJ1xuICAgICAgfTtcbiAgICAgIGxldCB7dWRpZCwgZW1Qb3J0fSA9IGF3YWl0IGhlbHBlcnMuZ2V0RGV2aWNlSW5mb0Zyb21DYXBzKGNhcHMpO1xuICAgICAgdWRpZC5zaG91bGQuZXF1YWwoJ3JvdGFsdW1lLTEzMzgnKTtcbiAgICAgIGVtUG9ydC5zaG91bGQuZXF1YWwoMTIzNCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZXQgZGV2aWNlSWQgYW5kIGVtUG9ydCBieSB1ZGlkIGlmIHVkaWQgYW5kIHBsYXRmb3JtVmVyc2lvbiBhcmUgZ2l2ZW4nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgY2FwcyA9IHtcbiAgICAgICAgdWRpZDogJzAxMjM0NTY3ODknLFxuICAgICAgICBwbGF0Zm9ybVZlcnNpb246ICcyLjMnXG4gICAgICB9O1xuICAgICAgbGV0IHt1ZGlkLCBlbVBvcnR9ID0gYXdhaXQgaGVscGVycy5nZXREZXZpY2VJbmZvRnJvbUNhcHMoY2Fwcyk7XG4gICAgICB1ZGlkLnNob3VsZC5lcXVhbCgnMDEyMzQ1Njc4OScpO1xuICAgICAgZW1Qb3J0LnNob3VsZC5lcXVhbCgxMjM0KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdjcmVhdGVBREInLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGN1ckRldmljZUlkID0gJyc7XG4gICAgbGV0IGVtdWxhdG9yUG9ydCA9IC0xO1xuICAgIGJlZm9yZShmdW5jdGlvbiAoKSB7XG4gICAgICBzaW5vbi5zdHViKEFEQiwgJ2NyZWF0ZUFEQicpLmNhbGxzRmFrZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2V0RGV2aWNlSWQ6ICh1ZGlkKSA9PiB7IGN1ckRldmljZUlkID0gdWRpZDsgfSxcbiAgICAgICAgICBzZXRFbXVsYXRvclBvcnQ6IChlbVBvcnQpID0+IHsgZW11bGF0b3JQb3J0ID0gZW1Qb3J0OyB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBhZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICBBREIuY3JlYXRlQURCLnJlc3RvcmUoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhZGIgYW5kIHNldCBkZXZpY2UgaWQgYW5kIGVtdWxhdG9yIHBvcnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBoZWxwZXJzLmNyZWF0ZUFEQihcIjEuN1wiLCBcIjExMTIyMlwiLCBcIjExMVwiLCBcIjIyMlwiLCB0cnVlLCBcInJlbW90ZV9ob3N0XCIsIHRydWUpO1xuICAgICAgQURCLmNyZWF0ZUFEQi5jYWxsZWRXaXRoRXhhY3RseSh7XG4gICAgICAgIGphdmFWZXJzaW9uOiBcIjEuN1wiLFxuICAgICAgICBhZGJQb3J0OiBcIjIyMlwiLFxuICAgICAgICBzdXBwcmVzc0tpbGxTZXJ2ZXI6IHRydWUsXG4gICAgICAgIHJlbW90ZUFkYkhvc3Q6IFwicmVtb3RlX2hvc3RcIixcbiAgICAgICAgY2xlYXJEZXZpY2VMb2dzT25TdGFydDogdHJ1ZSxcbiAgICAgIH0pLnNob3VsZC5iZS50cnVlO1xuICAgICAgY3VyRGV2aWNlSWQuc2hvdWxkLmVxdWFsKFwiMTExMjIyXCIpO1xuICAgICAgZW11bGF0b3JQb3J0LnNob3VsZC5lcXVhbChcIjExMVwiKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBzZXQgZW11bGF0b3IgcG9ydCBpZiBlbVBvcnQgaXMgdW5kZWZpbmVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZW11bGF0b3JQb3J0ID0gNTU1NTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuY3JlYXRlQURCKCk7XG4gICAgICBlbXVsYXRvclBvcnQuc2hvdWxkLmVxdWFsKDU1NTUpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldExhdW5jaEluZm9Gcm9tTWFuaWZlc3QnLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHdoZW4gbm8gYXBwIHByZXNlbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygncGFja2FnZUFuZExhdW5jaEFjdGl2aXR5RnJvbU1hbmlmZXN0JykubmV2ZXIoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuZ2V0TGF1bmNoSW5mbyhhZGIsIHt9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB3aGVuIGFwcFBhY2thZ2UgJiBhcHBBY3Rpdml0eSBhcmUgYWxyZWFkeSBwcmVzZW50JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3BhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCcpLm5ldmVyKCk7XG4gICAgICBhd2FpdCBoZWxwZXJzLmdldExhdW5jaEluZm8oYWRiLCB7YXBwOiBcImZvb1wiLCBhcHBQYWNrYWdlOiBcImJhclwiLFxuICAgICAgICBhcHBBY3Rpdml0eTogXCJhY3RcIn0pO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBhY2thZ2UgYW5kIGxhdW5jaCBhY3Rpdml0eSBmcm9tIG1hbmlmZXN0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3BhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCcpLndpdGhFeGFjdEFyZ3MoJ2ZvbycpXG4gICAgICAgIC5yZXR1cm5zKHthcGtQYWNrYWdlOiAncGtnJywgYXBrQWN0aXZpdHk6ICdhY2snfSk7XG4gICAgICBjb25zdCByZXN1bHQgPSB7YXBwUGFja2FnZTogJ3BrZycsIGFwcFdhaXRQYWNrYWdlOiAncGtnJyxcbiAgICAgICAgICAgICAgICAgICAgICBhcHBBY3Rpdml0eTogJ2FjaycsIGFwcFdhaXRBY3Rpdml0eTogJ2Fjayd9O1xuICAgICAgKGF3YWl0IGhlbHBlcnMuZ2V0TGF1bmNoSW5mbyhhZGIsIHthcHA6IFwiZm9vXCJ9KSkuc2hvdWxkLmRlZXBcbiAgICAgICAgLmVxdWFsKHJlc3VsdCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3Qgb3ZlcnJpZGUgYXBwUGFja2FnZSwgYXBwV2FpdFBhY2thZ2UsIGFwcEFjdGl2aXR5LCBhcHBXYWl0QWN0aXZpdHkgJyArXG4gICAgICAgJ2Zyb20gbWFuaWZlc3QgaWYgdGhleSBhcmUgYWxscmVhZHkgZGVmaW5lZCBpbiBvcHRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IG9wdHNGcm9tTWFuaWZlc3QgPSB7YXBrUGFja2FnZTogJ21wa2cnLCBhcGtBY3Rpdml0eTogJ21hY2snfTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdwYWNrYWdlQW5kTGF1bmNoQWN0aXZpdHlGcm9tTWFuaWZlc3QnKVxuICAgICAgICAud2l0aEV4YWN0QXJncygnZm9vJykudHdpY2UoKS5yZXR1cm5zKG9wdHNGcm9tTWFuaWZlc3QpO1xuXG4gICAgICBsZXQgaW5PcHRzID0ge2FwcDogJ2ZvbycsIGFwcEFjdGl2aXR5OiAnYWNrJywgYXBwV2FpdFBhY2thZ2U6ICd3cGtnJywgYXBwV2FpdEFjdGl2aXR5OiAnd2FjaycgfTtcbiAgICAgIGxldCBvdXRPcHRzID0ge2FwcFBhY2thZ2U6ICdtcGtnJywgYXBwQWN0aXZpdHk6ICdhY2snLCBhcHBXYWl0UGFja2FnZTogJ3dwa2cnLCBhcHBXYWl0QWN0aXZpdHk6ICd3YWNrJ307XG4gICAgICAoYXdhaXQgaGVscGVycy5nZXRMYXVuY2hJbmZvKGFkYiwgaW5PcHRzKSkuc2hvdWxkLmRlZXAuZXF1YWwob3V0T3B0cyk7XG5cbiAgICAgIGluT3B0cyA9IHthcHA6ICdmb28nLCBhcHBQYWNrYWdlOiAncGtnJywgYXBwV2FpdFBhY2thZ2U6ICd3cGtnJywgYXBwV2FpdEFjdGl2aXR5OiAnd2Fjayd9O1xuICAgICAgb3V0T3B0cyA9IHthcHBQYWNrYWdlOiAncGtnJywgYXBwQWN0aXZpdHk6ICdtYWNrJywgYXBwV2FpdFBhY2thZ2U6ICd3cGtnJywgYXBwV2FpdEFjdGl2aXR5OiAnd2Fjayd9O1xuICAgICAgKGF3YWl0IGhlbHBlcnMuZ2V0TGF1bmNoSW5mbyhhZGIsIGluT3B0cykpLnNob3VsZC5kZWVwLmVxdWFsKG91dE9wdHMpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdyZXNldEFwcCcsIHdpdGhNb2Nrcyh7YWRiLCBoZWxwZXJzfSwgKG1vY2tzKSA9PiB7XG4gICAgY29uc3QgbG9jYWxBcGtQYXRoID0gJ2xvY2FsJztcbiAgICBjb25zdCBwa2cgPSAncGtnJztcbiAgICBpdCgnc2hvdWxkIGNvbXBsYWluIGlmIG9wdHMgYXJlbnQgcGFzc2VkIGNvcnJlY3RseScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGhlbHBlcnMucmVzZXRBcHAoYWRiLCB7fSlcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvYXBwUGFja2FnZS8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBkbyBmdWxsIHJlc2V0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGwnKS5vbmNlKCkud2l0aEFyZ3MobG9jYWxBcGtQYXRoKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdmb3JjZVN0b3AnKS53aXRoRXhhY3RBcmdzKHBrZykub25jZSgpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzQXBwSW5zdGFsbGVkJykub25jZSgpLndpdGhFeGFjdEFyZ3MocGtnKS5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3VuaW5zdGFsbEFwaycpLm9uY2UoKS53aXRoRXhhY3RBcmdzKHBrZyk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnJlc2V0QXBwKGFkYiwge2FwcDogbG9jYWxBcGtQYXRoLCBhcHBQYWNrYWdlOiBwa2d9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gZG8gZmFzdCByZXNldCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc0FwcEluc3RhbGxlZCcpLm9uY2UoKS53aXRoRXhhY3RBcmdzKHBrZykucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdmb3JjZVN0b3AnKS53aXRoRXhhY3RBcmdzKHBrZykub25jZSgpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2NsZWFyJykud2l0aEV4YWN0QXJncyhwa2cpLm9uY2UoKS5yZXR1cm5zKCdTdWNjZXNzJyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ3JhbnRBbGxQZXJtaXNzaW9ucycpLm9uY2UoKS53aXRoRXhhY3RBcmdzKHBrZyk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnJlc2V0QXBwKGFkYiwge2FwcDogbG9jYWxBcGtQYXRoLCBhcHBQYWNrYWdlOiBwa2csIGZhc3RSZXNldDogdHJ1ZSwgYXV0b0dyYW50UGVybWlzc2lvbnM6dHJ1ZX0pO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcGVyZm9ybSByZWluc3RhbGwgaWYgYXBwIGlzIG5vdCBpbnN0YWxsZWQgYW5kIGZhc3QgcmVzZXQgaXMgcmVxdWVzdGVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzQXBwSW5zdGFsbGVkJykub25jZSgpLndpdGhFeGFjdEFyZ3MocGtnKS5yZXR1cm5zKGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdmb3JjZVN0b3AnKS53aXRoRXhhY3RBcmdzKHBrZykubmV2ZXIoKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdjbGVhcicpLndpdGhFeGFjdEFyZ3MocGtnKS5uZXZlcigpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3VuaW5zdGFsbEFwaycpLm5ldmVyKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaW5zdGFsbCcpLm9uY2UoKS53aXRoQXJncyhsb2NhbEFwa1BhdGgpO1xuICAgICAgYXdhaXQgaGVscGVycy5yZXNldEFwcChhZGIsIHthcHA6IGxvY2FsQXBrUGF0aCwgYXBwUGFja2FnZTogcGtnLCBmYXN0UmVzZXQ6IHRydWV9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuXG4gIGRlc2NyaWJlKCdpbnN0YWxsQXBrJywgd2l0aE1vY2tzKHthZGIsIGZzLCBoZWxwZXJzfSwgZnVuY3Rpb24gKG1vY2tzKSB7XG4gICAgLy91c2UgbW9jayBhcHBpdW0gY2FwYWJpbGl0aWVzIGZvciB0aGlzIHRlc3RcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYXBwIDogJ2xvY2FsJyxcbiAgICAgIGFwcFBhY2thZ2UgOiAncGtnJyxcbiAgICAgIGFuZHJvaWRJbnN0YWxsVGltZW91dCA6IDkwMDAwXG4gICAgfTtcbiAgICBpdCgnc2hvdWxkIGNvbXBsYWluIGlmIGFwcFBhY2thZ2UgaXMgbm90IHBhc3NlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5zdGFsbEFwayhhZGIsIHt9KVxuICAgICAgICAgICAgICAuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC9hcHBQYWNrYWdlLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBpbnN0YWxsL3VwZ3JhZGUgYW5kIHJlc2V0IGFwcCBpZiBmYXN0IHJlc2V0IGlzIHNldCB0byB0cnVlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzQXBwSW5zdGFsbGVkJykub25jZSgpLnJldHVybnModHJ1ZSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaW5zdGFsbE9yVXBncmFkZScpLm9uY2UoKS53aXRoQXJncyhvcHRzLmFwcCwgb3B0cy5hcHBQYWNrYWdlKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygncmVzZXRBcHAnKS5vbmNlKCkud2l0aEFyZ3MoYWRiKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5zdGFsbEFwayhhZGIsIE9iamVjdC5hc3NpZ24oe30sIG9wdHMsIHtmYXN0UmVzZXQ6IHRydWV9KSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmVpbnN0YWxsIGFwcCBpZiBmdWxsIHJlc2V0IGlzIHNldCB0byB0cnVlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGxPclVwZ3JhZGUnKS5uZXZlcigpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdyZXNldEFwcCcpLm9uY2UoKS53aXRoQXJncyhhZGIpO1xuICAgICAgYXdhaXQgaGVscGVycy5pbnN0YWxsQXBrKGFkYiwgT2JqZWN0LmFzc2lnbih7fSwgb3B0cywge2Zhc3RSZXNldDogdHJ1ZSwgZnVsbFJlc2V0OiB0cnVlfSkpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBydW4gcmVzZXQgaWYgdGhlIGNvcnJlc3BvbmRpbmcgb3B0aW9uIGlzIG5vdCBzZXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaW5zdGFsbE9yVXBncmFkZScpLm9uY2UoKS53aXRoQXJncyhvcHRzLmFwcCwgb3B0cy5hcHBQYWNrYWdlKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygncmVzZXRBcHAnKS5uZXZlcigpO1xuICAgICAgYXdhaXQgaGVscGVycy5pbnN0YWxsQXBrKGFkYiwgb3B0cyk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgaW5zdGFsbC91cGdyYWRlIGFuZCBza2lwIGZhc3QgcmVzZXRpbmcgdGhlIGFwcCBpZiB0aGlzIHdhcyB0aGUgZnJlc2ggaW5zdGFsbCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc0FwcEluc3RhbGxlZCcpLm9uY2UoKS5yZXR1cm5zKGZhbHNlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbnN0YWxsT3JVcGdyYWRlJykub25jZSgpLndpdGhBcmdzKG9wdHMuYXBwLCBvcHRzLmFwcFBhY2thZ2UpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdyZXNldEFwcCcpLm5ldmVyKCk7XG4gICAgICBhd2FpdCBoZWxwZXJzLmluc3RhbGxBcGsoYWRiLCBPYmplY3QuYXNzaWduKHt9LCBvcHRzLCB7ZmFzdFJlc2V0OiB0cnVlfSkpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnaW5zdGFsbE90aGVyQXBrcycsIHdpdGhNb2Nrcyh7YWRiLCBmcywgaGVscGVyc30sIGZ1bmN0aW9uIChtb2Nrcykge1xuICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICBhcHA6ICdsb2NhbCcsXG4gICAgICBhcHBQYWNrYWdlOiAncGtnJyxcbiAgICAgIGFuZHJvaWRJbnN0YWxsVGltZW91dDogOTAwMDBcbiAgICB9O1xuXG4gICAgY29uc3QgZmFrZUFwayA9ICcvcGF0aC90by9mYWtlL2FwcC5hcGsnO1xuICAgIGNvbnN0IG90aGVyRmFrZUFwayA9ICcvcGF0aC90by9vdGhlci9mYWtlL2FwcC5hcGsnO1xuXG4gICAgY29uc3QgZXhwZWN0ZWRBREJJbnN0YWxsT3B0cyA9IHtcbiAgICAgIGdyYW50UGVybWlzc2lvbnM6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVvdXQ6IG9wdHMuYW5kcm9pZEluc3RhbGxUaW1lb3V0LFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBjYWxsIGFkYi5pbnN0YWxsT3JVcGdyYWRlIGlmIG90aGVyQXBwcyBpcyBlbXB0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbnN0YWxsT3JVcGdyYWRlJykubmV2ZXIoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5zdGFsbE90aGVyQXBrcyhbXSwgYWRiLCBvcHRzKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNhbGwgYWRiLmluc3RhbGxPclVwZ3JhZGUgb25jZSBpZiBvdGhlckFwcHMgaGFzIG9uZSBpdGVtJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGxPclVwZ3JhZGUnKS5vbmNlKCkud2l0aEFyZ3MoZmFrZUFwaywgbnVsbCwgZXhwZWN0ZWRBREJJbnN0YWxsT3B0cyk7XG4gICAgICBhd2FpdCBoZWxwZXJzLmluc3RhbGxPdGhlckFwa3MoW2Zha2VBcGtdLCBhZGIsIG9wdHMpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBhZGIuaW5zdGFsbE9yVXBncmFkZSB0d2ljZSBpZiBvdGhlckFwcHMgaGFzIHR3byBpdGVtJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGxPclVwZ3JhZGUnKS50d2ljZSgpO1xuICAgICAgYXdhaXQgaGVscGVycy5pbnN0YWxsT3RoZXJBcGtzKFtmYWtlQXBrLCBvdGhlckZha2VBcGtdLCBhZGIsIG9wdHMpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdpbml0VW5pY29kZUtleWJvYXJkJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluc3RhbGwgYW5kIGVuYWJsZSB1bmljb2RlSU1FJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGwnKS5vbmNlKCkucmV0dXJucygnJyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZGVmYXVsdElNRScpLm9uY2UoKS5yZXR1cm5zKCdkZWZhdWx0SU1FJyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZW5hYmxlSU1FJykub25jZSgpLnJldHVybnMoJycpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NldElNRScpLm9uY2UoKS5yZXR1cm5zKCcnKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5pdFVuaWNvZGVLZXlib2FyZChhZGIpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdwdXNoU2V0dGluZ3NBcHAnLCB3aXRoTW9ja3Moe2FkYn0sIChtb2NrcykgPT4ge1xuICAgIGl0KCdzaG91bGQgc2tpcCBncmFudGluZyBwZXJtaXNzaW9ucyBpZiB0aGUgYXBwIGlzIGFscmVhZHkgcnVubmluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbnN0YWxsT3JVcGdyYWRlJykub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3Byb2Nlc3NFeGlzdHMnKVxuICAgICAgICAgIC53aXRoRXhhY3RBcmdzKCdpby5hcHBpdW0uc2V0dGluZ3MnKS5vbmNlKClcbiAgICAgICAgICAucmV0dXJucyh0cnVlKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMucHVzaFNldHRpbmdzQXBwKGFkYik7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBsYXVuY2ggc2V0dGluZ3MgYXBwIGlmIGl0IGlzbnQgcnVubmluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpbnN0YWxsT3JVcGdyYWRlJykub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3Byb2Nlc3NFeGlzdHMnKS5vbmNlKClcbiAgICAgICAgLnJldHVybnMoZmFsc2UpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3N0YXJ0QXBwJykub25jZSgpO1xuICAgICAgYXdhaXQgaGVscGVycy5wdXNoU2V0dGluZ3NBcHAoYWRiKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnc2V0TW9ja0xvY2F0aW9uQXBwJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGVuYWJsZSBtb2NrIGxvY2F0aW9uIGZvciBhcGkgbGV2ZWwgYmVsb3cgMjMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBpTGV2ZWwnKS5yZXR1cm5zKEIucmVzb2x2ZSgxOCkpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3NoZWxsJykud2l0aEV4YWN0QXJncyhbJ3NldHRpbmdzJywgJ3B1dCcsICdzZWN1cmUnLCAnbW9ja19sb2NhdGlvbicsICcxJ10pLm9uY2UoKVxuICAgICAgICAucmV0dXJucygnJyk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnNldE1vY2tMb2NhdGlvbkFwcChhZGIsICdpby5hcHBpdW0uc2V0dGluZ3MnKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGVuYWJsZSBtb2NrIGxvY2F0aW9uIGZvciBhcGkgbGV2ZWwgMjMgYW5kIGFib3ZlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldEFwaUxldmVsJykucmV0dXJucyhCLnJlc29sdmUoMjMpKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpLndpdGhFeGFjdEFyZ3MoWydhcHBvcHMnLCAnc2V0JywgJ2lvLmFwcGl1bS5zZXR0aW5ncycsICdhbmRyb2lkOm1vY2tfbG9jYXRpb24nLCAnYWxsb3cnXSkub25jZSgpXG4gICAgICAgIC5yZXR1cm5zKCcnKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuc2V0TW9ja0xvY2F0aW9uQXBwKGFkYiwgJ2lvLmFwcGl1bS5zZXR0aW5ncycpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCdwdXNoVW5sb2NrJywgd2l0aE1vY2tzKHthZGJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluc3RhbGwgdW5sb2NrQXBwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2luc3RhbGxPclVwZ3JhZGUnKS53aXRoQXJncyh1bmxvY2tBcGtQYXRoLCAnaW8uYXBwaXVtLnVubG9jaycpLm9uY2UoKVxuICAgICAgICAucmV0dXJucygnJyk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnB1c2hVbmxvY2soYWRiKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgncHVzaFN0cmluZ3MnLCB3aXRoTW9ja3Moe2FkYiwgZnN9LCAobW9ja3MpID0+IHtcbiAgICBjb25zdCBvcHRzID0ge2FwcDogJ2FwcCcsIHRtcERpcjogJy90bXBfZGlyJywgYXBwUGFja2FnZTogJ3BrZyd9O1xuICAgIGl0KCdzaG91bGQgZXh0cmFjdHMgc3RyaW5nLnhtbCBhbmQgY29udmVydHMgaXQgdG8gc3RyaW5nLmpzb24gYW5kIHB1c2hlcyBpdCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdyaW1yYWYnKS53aXRoRXhhY3RBcmdzKGAke1JFTU9URV9URU1QX1BBVEh9L3N0cmluZ3MuanNvbmApLm9uY2UoKTtcbiAgICAgIG1vY2tzLmZzLmV4cGVjdHMoJ2V4aXN0cycpLndpdGhFeGFjdEFyZ3Mob3B0cy5hcHApLnJldHVybnModHJ1ZSk7XG4gICAgICBtb2Nrcy5mcy5leHBlY3RzKCdyaW1yYWYnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZXh0cmFjdFN0cmluZ3NGcm9tQXBrJykud2l0aEFyZ3Mob3B0cy5hcHAsICdlbicpXG4gICAgICAgIC5yZXR1cm5zKHthcGtTdHJpbmdzOiB7aWQ6ICdzdHJpbmcnfSwgbG9jYWxQYXRoOiAnbG9jYWxfcGF0aCd9KTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdwdXNoJykud2l0aEV4YWN0QXJncygnbG9jYWxfcGF0aCcsIFJFTU9URV9URU1QX1BBVEgpLm9uY2UoKTtcbiAgICAgIChhd2FpdCBoZWxwZXJzLnB1c2hTdHJpbmdzKCdlbicsIGFkYiwgb3B0cykpLnNob3VsZC5iZS5kZWVwLmVxdWFsKHtpZDogJ3N0cmluZyd9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSByZW1vdGUgc3RyaW5ncy5qc29uIGlmIGFwcCBpcyBub3QgcHJlc2VudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdyaW1yYWYnKS53aXRoRXhhY3RBcmdzKGAke1JFTU9URV9URU1QX1BBVEh9L3N0cmluZ3MuanNvbmApLm9uY2UoKTtcbiAgICAgIG1vY2tzLmZzLmV4cGVjdHMoJ2V4aXN0cycpLndpdGhFeGFjdEFyZ3Mob3B0cy5hcHApLnJldHVybnMoZmFsc2UpO1xuICAgICAgKGF3YWl0IGhlbHBlcnMucHVzaFN0cmluZ3MoJ2VuJywgYWRiLCBvcHRzKSkuc2hvdWxkLmJlLmRlZXAuZXF1YWwoe30pO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MuZnMudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwdXNoIGFuIGVtcHR5IGpzb24gb2JqZWN0IGlmIGFwcCBkb2VzIG5vdCBoYXZlIHN0cmluZ3MueG1sJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3JpbXJhZicpLndpdGhFeGFjdEFyZ3MoYCR7UkVNT1RFX1RFTVBfUEFUSH0vc3RyaW5ncy5qc29uYCkub25jZSgpO1xuICAgICAgbW9ja3MuZnMuZXhwZWN0cygnZXhpc3RzJykud2l0aEV4YWN0QXJncyhvcHRzLmFwcCkucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmZzLmV4cGVjdHMoJ3JpbXJhZicpLm9uY2UoKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdleHRyYWN0U3RyaW5nc0Zyb21BcGsnKS50aHJvd3MoKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzaGVsbCcpLndpdGhFeGFjdEFyZ3MoJ2VjaG8nLCBbYCd7fScgPiAke1JFTU9URV9URU1QX1BBVEh9L3N0cmluZ3MuanNvbmBdKTtcbiAgICAgIChhd2FpdCBoZWxwZXJzLnB1c2hTdHJpbmdzKCdlbicsIGFkYiwgb3B0cykpLnNob3VsZC5iZS5kZWVwLmVxdWFsKHt9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIG1vY2tzLmZzLnZlcmlmeSgpO1xuICAgIH0pO1xuICB9KSk7XG4gIGRlc2NyaWJlKCd1bmxvY2snLCB3aXRoTW9ja3Moe2FkYiwgaGVscGVycywgdW5sb2NrZXJ9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBpZiBzY3JlZW4gaXMgYWxyZWFkeSB1bmxvY2tlZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc1NjcmVlbkxvY2tlZCcpLndpdGhFeGFjdEFyZ3MoKS5vbmNlKClcbiAgICAgICAgLnJldHVybnMoZmFsc2UpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2dldEFwaUxldmVsJykubmV2ZXIoKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdzdGFydEFwcCcpLm5ldmVyKCk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnVubG9jayhoZWxwZXJzLCBhZGIsIHt9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHN0YXJ0IHVubG9jayBhcHAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaXNTY3JlZW5Mb2NrZWQnKS5vbkNhbGwoMCkucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdmb3JjZVN0b3AnKS5vbmNlKCkucmV0dXJucygnJyk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc3RhcnRBcHAnKS5vbmNlKCkucmV0dXJucygnJyk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnVubG9jayhoZWxwZXJzLCBhZGIsIHt9KTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByYWlzZSBhbiBlcnJvciBvbiB1bmRlZmluZWQgdW5sb2NrS2V5IHdoZW4gdW5sb2NrVHlwZSBpcyBkZWZpbmVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzU2NyZWVuTG9ja2VkJykub25jZSgpLnJldHVybnModHJ1ZSk7XG4gICAgICBtb2Nrcy51bmxvY2tlci5leHBlY3RzKCdpc1ZhbGlkS2V5Jykub25jZSgpO1xuICAgICAgYXdhaXQgaGVscGVycy51bmxvY2soaGVscGVycywgYWRiLCB7dW5sb2NrVHlwZTogXCJwaW5cIn0pLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoJ3VubG9ja0tleScpO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MudW5sb2NrZXIudmVyaWZ5KCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBwaW5VbmxvY2sgaWYgdW5sb2NrVHlwZSBpcyBwaW4nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnaXNTY3JlZW5Mb2NrZWQnKS5vbkNhbGwoMCkucmV0dXJucyh0cnVlKTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc1NjcmVlbkxvY2tlZCcpLnJldHVybnMoZmFsc2UpO1xuICAgICAgbW9ja3MudW5sb2NrZXIuZXhwZWN0cygncGluVW5sb2NrJykub25jZSgpO1xuICAgICAgYXdhaXQgaGVscGVycy51bmxvY2soaGVscGVycywgYWRiLCB7dW5sb2NrVHlwZTogXCJwaW5cIiwgdW5sb2NrS2V5OiBcIjExMTFcIn0pO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNhbGwgcGFzc3dvcmRVbmxvY2sgaWYgdW5sb2NrVHlwZSBpcyBwYXNzd29yZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc1NjcmVlbkxvY2tlZCcpLm9uQ2FsbCgwKS5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzU2NyZWVuTG9ja2VkJykucmV0dXJucyhmYWxzZSk7XG4gICAgICBtb2Nrcy51bmxvY2tlci5leHBlY3RzKCdwYXNzd29yZFVubG9jaycpLm9uY2UoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMudW5sb2NrKGhlbHBlcnMsIGFkYiwge3VubG9ja1R5cGU6IFwicGFzc3dvcmRcIiwgdW5sb2NrS2V5OiBcImFwcGl1bVwifSk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2FsbCBwYXR0ZXJuVW5sb2NrIGlmIHVubG9ja1R5cGUgaXMgcGF0dGVybicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc1NjcmVlbkxvY2tlZCcpLm9uQ2FsbCgwKS5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzU2NyZWVuTG9ja2VkJykucmV0dXJucyhmYWxzZSk7XG4gICAgICBtb2Nrcy51bmxvY2tlci5leHBlY3RzKCdwYXR0ZXJuVW5sb2NrJykub25jZSgpO1xuICAgICAgYXdhaXQgaGVscGVycy51bmxvY2soaGVscGVycywgYWRiLCB7dW5sb2NrVHlwZTogXCJwYXR0ZXJuXCIsIHVubG9ja0tleTogXCIxMjM0NTY3ODlcIn0pO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNhbGwgZmluZ2VycHJpbnRVbmxvY2sgaWYgdW5sb2NrVHlwZSBpcyBmaW5nZXJwcmludCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc1NjcmVlbkxvY2tlZCcpLm9uQ2FsbCgwKS5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzU2NyZWVuTG9ja2VkJykucmV0dXJucyhmYWxzZSk7XG4gICAgICBtb2Nrcy51bmxvY2tlci5leHBlY3RzKCdmaW5nZXJwcmludFVubG9jaycpLm9uY2UoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMudW5sb2NrKGhlbHBlcnMsIGFkYiwge3VubG9ja1R5cGU6IFwiZmluZ2VycHJpbnRcIiwgdW5sb2NrS2V5OiBcIjExMTFcIn0pO1xuICAgICAgbW9ja3MuYWRiLnZlcmlmeSgpO1xuICAgICAgbW9ja3MudW5sb2NrZXIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpcyBhcGkgaXMgbG93ZXIgdGhhbiAyMyBhbmQgdHJ5aW5nIHRvIHVzZSBmaW5nZXJwcmludFVubG9jaycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCdpc1NjcmVlbkxvY2tlZCcpLm9uQ2FsbCgwKS5yZXR1cm5zKHRydWUpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ2lzU2NyZWVuTG9ja2VkJykucmV0dXJucyhmYWxzZSk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnZ2V0QXBpTGV2ZWwnKS5vbmNlKCkucmV0dXJucygyMSk7XG4gICAgICBhd2FpdCBoZWxwZXJzLnVubG9jayhoZWxwZXJzLCBhZGIsIHt1bmxvY2tUeXBlOiBcImZpbmdlcnByaW50XCIsIHVubG9ja0tleTogXCIxMTExXCJ9KS5zaG91bGQuZXZlbnR1YWxseVxuICAgICAgICAuYmUucmVqZWN0ZWRXaXRoKCdGaW5nZXJwcmludCcpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgnaW5pdERldmljZScsIHdpdGhNb2Nrcyh7aGVscGVycywgYWRifSwgKG1vY2tzKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0IGRldmljZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSB7bGFuZ3VhZ2U6IFwiZW5cIiwgbG9jYWxlOiBcInVzXCJ9O1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3dhaXRGb3JEZXZpY2UnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc3RhcnRMb2djYXQnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ3B1c2hTZXR0aW5nc0FwcCcpLm9uY2UoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygnZW5zdXJlRGV2aWNlTG9jYWxlJykud2l0aEV4YWN0QXJncyhhZGIsIG9wdHMubGFuZ3VhZ2UsIG9wdHMubG9jYWxlKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ3NldE1vY2tMb2NhdGlvbkFwcCcpLndpdGhFeGFjdEFyZ3MoYWRiLCAnaW8uYXBwaXVtLnNldHRpbmdzJykub25jZSgpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdwdXNoVW5sb2NrJykud2l0aEV4YWN0QXJncyhhZGIpLm9uY2UoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5pdERldmljZShhZGIsIG9wdHMpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBpbnN0YWxsIHNldHRpbmdzIGFwcCBhbmQgbW9jayBsb2NhdGlvbiBvbiBlbXVsYXRvcicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSB7YXZkOiBcImF2ZFwifTtcbiAgICAgIG1vY2tzLmFkYi5leHBlY3RzKCd3YWl0Rm9yRGV2aWNlJykub25jZSgpO1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3N0YXJ0TG9nY2F0Jykub25jZSgpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdwdXNoU2V0dGluZ3NBcHAnKS5uZXZlcigpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdlbnN1cmVEZXZpY2VMb2NhbGUnKS53aXRoQXJncyhhZGIpLm9uY2UoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygnc2V0TW9ja0xvY2F0aW9uQXBwJykubmV2ZXIoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygncHVzaFVubG9jaycpLndpdGhFeGFjdEFyZ3MoYWRiKS5vbmNlKCk7XG4gICAgICBhd2FpdCBoZWxwZXJzLmluaXREZXZpY2UoYWRiLCBvcHRzKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMudmVyaWZ5KCk7XG4gICAgICBtb2Nrcy5hZGIudmVyaWZ5KCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZGVmYXVsdElNRSBpZiB1bmljb2RlS2V5Ym9hcmQgaXMgc2V0dGVkIHRvIHRydWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBvcHRzID0ge3VuaWNvZGVLZXlib2FyZCA6IHRydWV9O1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3dhaXRGb3JEZXZpY2UnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc3RhcnRMb2djYXQnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ3B1c2hTZXR0aW5nc0FwcCcpLm9uY2UoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygnZW5zdXJlRGV2aWNlTG9jYWxlJykub25jZSgpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdzZXRNb2NrTG9jYXRpb25BcHAnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ2luaXRVbmljb2RlS2V5Ym9hcmQnKS53aXRoRXhhY3RBcmdzKGFkYikub25jZSgpLnJldHVybnMoXCJkZWZhdWx0SU1FXCIpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdwdXNoVW5sb2NrJykud2l0aEV4YWN0QXJncyhhZGIpLm9uY2UoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5pdERldmljZShhZGIsIG9wdHMpLnNob3VsZC5iZWNvbWUoXCJkZWZhdWx0SU1FXCIpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB1bmRlZmluZWQgaWYgdW5pY29kZUtleWJvYXJkIGlzIHNldHRlZCB0byBmYWxzZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSB7dW5pY29kZUtleWJvYXJkIDogZmFsc2V9O1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3dhaXRGb3JEZXZpY2UnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc3RhcnRMb2djYXQnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ3B1c2hTZXR0aW5nc0FwcCcpLm9uY2UoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygnZW5zdXJlRGV2aWNlTG9jYWxlJykub25jZSgpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdzZXRNb2NrTG9jYXRpb25BcHAnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ2luaXRVbmljb2RlS2V5Ym9hcmQnKS5uZXZlcigpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdwdXNoVW5sb2NrJykud2l0aEV4YWN0QXJncyhhZGIpLm9uY2UoKTtcbiAgICAgIHNob3VsZC5ub3QuZXhpc3QoYXdhaXQgaGVscGVycy5pbml0RGV2aWNlKGFkYiwgb3B0cykpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBwdXNoIHVubG9jayBhcHAgaWYgdW5sb2NrVHlwZSBpcyBkZWZpbmVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgb3B0cyA9IHt1bmxvY2tUeXBlOiBcInVubG9ja190eXBlXCJ9O1xuICAgICAgbW9ja3MuYWRiLmV4cGVjdHMoJ3dhaXRGb3JEZXZpY2UnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5hZGIuZXhwZWN0cygnc3RhcnRMb2djYXQnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ3B1c2hTZXR0aW5nc0FwcCcpLm9uY2UoKTtcbiAgICAgIG1vY2tzLmhlbHBlcnMuZXhwZWN0cygnZW5zdXJlRGV2aWNlTG9jYWxlJykub25jZSgpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdzZXRNb2NrTG9jYXRpb25BcHAnKS5vbmNlKCk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLmV4cGVjdHMoJ2luaXRVbmljb2RlS2V5Ym9hcmQnKS5uZXZlcigpO1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKCdwdXNoVW5sb2NrJykubmV2ZXIoKTtcbiAgICAgIGF3YWl0IGhlbHBlcnMuaW5pdERldmljZShhZGIsIG9wdHMpO1xuICAgICAgbW9ja3MuaGVscGVycy52ZXJpZnkoKTtcbiAgICAgIG1vY2tzLmFkYi52ZXJpZnkoKTtcbiAgICB9KTtcbiAgfSkpO1xuICBkZXNjcmliZSgncmVtb3ZlTnVsbFByb3BlcnRpZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBpZ25vcmUgbnVsbCBwcm9wZXJ0aWVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHRlc3QgPSB7Zm9vOiBudWxsLCBiYXI6IHRydWV9O1xuICAgICAgaGVscGVycy5yZW1vdmVOdWxsUHJvcGVydGllcyh0ZXN0KTtcbiAgICAgIF8ua2V5cyh0ZXN0KS5sZW5ndGguc2hvdWxkLmVxdWFsKDEpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgaWdub3JlIHVuZGVmaW5lZCBwcm9wZXJ0aWVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHRlc3QgPSB7Zm9vOiB1bmRlZmluZWQsIGJhcjogdHJ1ZX07XG4gICAgICBoZWxwZXJzLnJlbW92ZU51bGxQcm9wZXJ0aWVzKHRlc3QpO1xuICAgICAgXy5rZXlzKHRlc3QpLmxlbmd0aC5zaG91bGQuZXF1YWwoMSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgaWdub3JlIGZhbHN5IHByb3BlcnRpZXMgbGlrZSAwIGFuZCBmYWxzZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB0ZXN0ID0ge2ZvbzogZmFsc2UsIGJhcjogdHJ1ZSwgemVybzogMH07XG4gICAgICBoZWxwZXJzLnJlbW92ZU51bGxQcm9wZXJ0aWVzKHRlc3QpO1xuICAgICAgXy5rZXlzKHRlc3QpLmxlbmd0aC5zaG91bGQuZXF1YWwoMyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgndHJ1bmNhdGVEZWNpbWFscycsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHVzZSBmbG9vciB3aGVuIG51bWJlciBpcyBwb3NpdGl2ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlbHBlcnMudHJ1bmNhdGVEZWNpbWFscygxMi4zNDUsIDIpLnNob3VsZC5lcXVhbCgxMi4zNCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB1c2UgY2VpbCB3aGVuIG51bWJlciBpcyBuZWdhdGl2ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlbHBlcnMudHJ1bmNhdGVEZWNpbWFscygtMTIuMzQ1LCAyKS5zaG91bGQuZXF1YWwoLTEyLjM0KTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRDaHJvbWVQa2cnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGFrYWdlIGZvciBjaHJvbWl1bScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlbHBlcnMuZ2V0Q2hyb21lUGtnKCdjaHJvbWl1bScpLnNob3VsZC5kZWVwLmVxdWFsKFxuICAgICAgICB7cGtnOiAnb3JnLmNocm9taXVtLmNocm9tZS5zaGVsbCcsIGFjdGl2aXR5OiAnLkNocm9tZVNoZWxsQWN0aXZpdHknfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGFrYWdlIGZvciBjaHJvbWViZXRhJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgaGVscGVycy5nZXRDaHJvbWVQa2coJ2Nocm9tZWJldGEnKS5zaG91bGQuZGVlcC5lcXVhbChcbiAgICAgICAge3BrZzogJ2NvbS5jaHJvbWUuYmV0YScsIGFjdGl2aXR5OiAnY29tLmdvb2dsZS5hbmRyb2lkLmFwcHMuY2hyb21lLk1haW4nfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcGFrYWdlIGZvciBicm93c2VyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgaGVscGVycy5nZXRDaHJvbWVQa2coJ2Jyb3dzZXInKS5zaG91bGQuZGVlcC5lcXVhbChcbiAgICAgICAge3BrZzogJ2NvbS5hbmRyb2lkLmJyb3dzZXInLCBhY3Rpdml0eTogJ2NvbS5hbmRyb2lkLmJyb3dzZXIuQnJvd3NlckFjdGl2aXR5J30pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBha2FnZSBmb3IgY2hyb21pdW0tYnJvd3NlcicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlbHBlcnMuZ2V0Q2hyb21lUGtnKCdjaHJvbWl1bS1icm93c2VyJykuc2hvdWxkLmRlZXAuZXF1YWwoXG4gICAgICAgIHtwa2c6ICdvcmcuY2hyb21pdW0uY2hyb21lJywgYWN0aXZpdHk6ICdjb20uZ29vZ2xlLmFuZHJvaWQuYXBwcy5jaHJvbWUuTWFpbid9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwYWthZ2UgZm9yIGNocm9taXVtLXdlYnZpZXcnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBoZWxwZXJzLmdldENocm9tZVBrZygnY2hyb21pdW0td2VidmlldycpLnNob3VsZC5kZWVwLmVxdWFsKFxuICAgICAgICB7cGtnOiAnb3JnLmNocm9taXVtLndlYnZpZXdfc2hlbGwnLCBhY3Rpdml0eTogJ29yZy5jaHJvbWl1bS53ZWJ2aWV3X3NoZWxsLldlYlZpZXdCcm93c2VyQWN0aXZpdHknfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjcGFyc2VBcnJheScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHBhcnNlIGFycmF5IHN0cmluZyB0byBhcnJheScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGhlbHBlcnMucGFyc2VBcnJheSgnW1wiYVwiLCBcImJcIiwgXCJjXCJdJykuc2hvdWxkLmVxbChbJ2EnLCAnYicsICdjJ10pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcGFyc2UgYSBzaW1wbGUgc3RyaW5nIHRvIG9uZSBpdGVtIGFycmF5JywgZnVuY3Rpb24gKCkge1xuICAgICAgaGVscGVycy5wYXJzZUFycmF5KCdhYmMnKS5zaG91bGQuZXFsKFsnYWJjJ10pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
