'use strict';

var _defineProperty = require('babel-runtime/helpers/define-property')['default'];

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _ = require('../../..');

var _2 = _interopRequireDefault(_);

var _libCommandsGeneral = require('../../../lib/commands/general');

var _libAndroidHelpers = require('../../../lib/android-helpers');

var _libAndroidHelpers2 = _interopRequireDefault(_libAndroidHelpers);

var _appiumTestSupport = require('appium-test-support');

var _appiumSupport = require('appium-support');

var _appiumAndroidBootstrap = require('appium-android-bootstrap');

var _appiumAndroidBootstrap2 = _interopRequireDefault(_appiumAndroidBootstrap);

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _appiumAdb = require('appium-adb');

var _appiumAdb2 = _interopRequireDefault(_appiumAdb);

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

var driver = undefined;
var sandbox = _sinon2['default'].sandbox.create();
var expect = _chai2['default'].expect;

describe('General', function () {
  beforeEach(function () {
    driver = new _2['default']();
    driver.bootstrap = new _appiumAndroidBootstrap2['default']();
    driver.adb = new _appiumAdb2['default']();
    driver.caps = {};
    driver.opts = {};
  });
  afterEach(function () {
    sandbox.restore();
  });
  describe('keys', function () {
    it('should send keys via setText bootstrap command', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            driver.opts.unicodeKeyboard = true;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.keys('keys'));

          case 4:
            driver.bootstrap.sendAction.calledWithExactly('setText', { text: 'keys', replace: false, unicodeKeyboard: true }).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should join keys if keys is array', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            driver.opts.unicodeKeyboard = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.keys(['k', 'e', 'y', 's']));

          case 4:
            driver.bootstrap.sendAction.calledWithExactly('setText', { text: 'keys', replace: false }).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getDeviceTime', function () {
    it('should return device time', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell');
            driver.adb.shell.returns(' 11:12 ');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getDeviceTime().should.become('11:12'));

          case 4:
            driver.adb.shell.calledWithExactly(['date']).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should thorws error if shell command failed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'shell').throws();
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDeviceTime().should.be.rejectedWith('Could not capture'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getPageSource', function () {
    it('should return page source', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('source').returns('sources');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getPageSource());

          case 3:
            context$3$0.sent.should.be.equal('sources');

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('back', function () {
    it('should press back', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.back());

          case 3:
            driver.bootstrap.sendAction.calledWithExactly('pressBack').should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('isKeyboardShown', function () {
    it('should return true if the keyboard is shown', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: true };
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isKeyboardShown());

          case 3:
            context$3$0.sent.should.equal(true);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return false if the keyboard is not shown', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: false, canCloseKeyboard: true };
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isKeyboardShown());

          case 3:
            context$3$0.sent.should.equal(false);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('hideKeyboard', function () {
    it('should hide keyboard via back command', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'back');
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: true };
            };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.hideKeyboard());

          case 4:
            driver.back.calledOnce.should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not call back command if can\'t close keyboard', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'back');
            driver.adb.isSoftKeyboardPresent = function () {
              return { isKeyboardShown: true, canCloseKeyboard: false };
            };
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.hideKeyboard());

          case 4:
            driver.back.notCalled.should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if no keyboard is present', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.isSoftKeyboardPresent = function () {
              return false;
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.hideKeyboard().should.be.rejectedWith(/not present/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('openSettingsActivity', function () {
    it('should open settings activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'pkg', appActivity: 'act' });
            sandbox.stub(driver.adb, 'shell');
            sandbox.stub(driver.adb, 'waitForNotActivity');
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.openSettingsActivity('set1'));

          case 5:
            driver.adb.shell.calledWithExactly(['am', 'start', '-a', 'android.settings.set1']).should.be['true'];
            driver.adb.waitForNotActivity.calledWithExactly('pkg', 'act', 5000).should.be['true'];

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getWindowSize', function () {
    it('should get window size', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('getDeviceSize').returns('size');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getWindowSize());

          case 3:
            context$3$0.sent.should.be.equal('size');

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getWindowRect', function () {
    it('should get window size', function callee$2$0() {
      var rect;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.bootstrap, 'sendAction').withArgs('getDeviceSize').returns({ width: 300, height: 400 });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getWindowRect());

          case 3:
            rect = context$3$0.sent;

            rect.width.should.be.equal(300);
            rect.height.should.be.equal(400);
            rect.x.should.be.equal(0);
            rect.y.should.be.equal(0);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getCurrentActivity', function () {
    it('should get current activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appActivity: 'act' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity().should.eventually.be.equal('act'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getCurrentPackage', function () {
    it('should get current activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: 'pkg' });
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage().should.eventually.equal('pkg'));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('isAppInstalled', function () {
    it('should return true if app is installed', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'isAppInstalled').withArgs('pkg').returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.isAppInstalled('pkg'));

          case 3:
            context$3$0.sent.should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('removeApp', function () {
    it('should remove app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'uninstallApk').withArgs('pkg').returns(true);
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.removeApp('pkg'));

          case 3:
            context$3$0.sent.should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('installApp', function () {
    it('should install app', function callee$2$0() {
      var app;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            app = 'app.apk';

            sandbox.stub(driver.helpers, 'configureApp').withArgs(app, '.apk').returns(app);
            sandbox.stub(_appiumSupport.fs, 'rimraf').returns();
            sandbox.stub(driver.adb, 'install').returns(true);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.installApp(app));

          case 6:
            driver.helpers.configureApp.calledOnce.should.be['true'];
            _appiumSupport.fs.rimraf.notCalled.should.be['true'];
            driver.adb.install.calledOnce.should.be['true'];

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if APK does not exist', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.installApp('non/existent/app.apk').should.be.rejectedWith(/does not exist or is not accessible/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('background', function () {
    it('should bring app to background and back', function callee$2$0() {
      var appPackage, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            appPackage = 'wpkg';
            appActivity = 'wacv';

            driver.opts = { appPackage: appPackage, appActivity: appActivity, intentAction: 'act',
              intentCategory: 'cat', intentFlags: 'flgs',
              optionalIntentArguments: 'opt' };
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: appPackage, appActivity: appActivity });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            sandbox.stub(driver, 'activateApp');
            context$3$0.next = 10;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 10:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.activateApp.calledWithExactly(appPackage).should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 15:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should bring app to background and back if started after session init', function callee$2$0() {
      var appPackage, appActivity, params;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            appPackage = 'newpkg';
            appActivity = 'newacv';

            driver.opts = { appPackage: 'pkg', appActivity: 'acv', intentAction: 'act',
              intentCategory: 'cat', intentFlags: 'flgs',
              optionalIntentArguments: 'opt' };
            params = { pkg: appPackage, activity: appActivity, action: 'act', category: 'cat',
              flags: 'flgs', waitPkg: 'wpkg', waitActivity: 'wacv',
              optionalIntentArguments: 'opt', stopApp: false };

            driver._cachedActivityArgs = _defineProperty({}, appPackage + '/' + appActivity, params);
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: appPackage, appActivity: appActivity });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            sandbox.stub(driver, 'activateApp');
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 12:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.adb.startApp.calledWithExactly(params).should.be['true'];
            driver.activateApp.notCalled.should.be['true'];

          case 17:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should bring app to background and back if waiting for other pkg / activity', function callee$2$0() {
      var appPackage, appActivity, appWaitPackage, appWaitActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            appPackage = 'somepkg';
            appActivity = 'someacv';
            appWaitPackage = 'somewaitpkg';
            appWaitActivity = 'somewaitacv';

            driver.opts = { appPackage: appPackage, appActivity: appActivity, appWaitPackage: appWaitPackage, appWaitActivity: appWaitActivity,
              intentAction: 'act', intentCategory: 'cat',
              intentFlags: 'flgs', optionalIntentArguments: 'opt',
              stopApp: false };
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'getFocusedPackageAndActivity').returns({ appPackage: appWaitPackage, appActivity: appWaitActivity });
            sandbox.stub(_bluebird2['default'], 'delay');
            sandbox.stub(driver.adb, 'startApp');
            sandbox.stub(driver, 'activateApp');
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(driver.background(10));

          case 12:
            driver.adb.getFocusedPackageAndActivity.calledOnce.should.be['true'];
            driver.adb.goToHome.calledOnce.should.be['true'];
            _bluebird2['default'].delay.calledWithExactly(10000).should.be['true'];
            driver.activateApp.calledWithExactly(appWaitPackage).should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 17:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not bring app back if seconds are negative', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver.adb, 'goToHome');
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.background(-1));

          case 4:
            driver.adb.goToHome.calledOnce.should.be['true'];
            driver.adb.startApp.notCalled.should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getStrings', (0, _appiumTestSupport.withMocks)({ helpers: _libAndroidHelpers2['default'] }, function (mocks) {
    it('should return app strings', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.bootstrap.sendAction = function () {
              return '';
            };
            mocks.helpers.expects("pushStrings").returns({ test: 'en_value' });
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.getStrings('en'));

          case 4:
            strings = context$3$0.sent;

            strings.test.should.equal('en_value');
            mocks.helpers.verify();

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return cached app strings for the specified language', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.getDeviceLanguage = function () {
              return 'en';
            };
            driver.apkStrings.en = { test: 'en_value' };
            driver.apkStrings.fr = { test: 'fr_value' };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getStrings('fr'));

          case 5:
            strings = context$3$0.sent;

            strings.test.should.equal('fr_value');

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return cached app strings for the device language', function callee$2$0() {
      var strings;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.getDeviceLanguage = function () {
              return 'en';
            };
            driver.apkStrings.en = { test: 'en_value' };
            driver.apkStrings.fr = { test: 'fr_value' };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getStrings());

          case 5:
            strings = context$3$0.sent;

            strings.test.should.equal('en_value');

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  }));
  describe('launchApp', function () {
    it('should init and start app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'initAUT');
            sandbox.stub(driver, 'startAUT');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.launchApp());

          case 4:
            driver.initAUT.calledOnce.should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('startActivity', function () {
    var params = undefined;
    beforeEach(function () {
      params = { pkg: 'pkg', activity: 'act', waitPkg: 'wpkg', waitActivity: 'wact',
        action: 'act', category: 'cat', flags: 'flgs', optionalIntentArguments: 'opt' };
      sandbox.stub(driver.adb, 'startApp');
    });
    it('should start activity', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            params.optionalIntentArguments = 'opt';
            params.stopApp = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', 'wpkg', 'wact', 'act', 'cat', 'flgs', 'opt', true));

          case 4:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should use dontStopAppOnReset from opts if it is not passed as param', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.dontStopAppOnReset = true;
            params.stopApp = false;
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', 'wpkg', 'wact', 'act', 'cat', 'flgs', 'opt'));

          case 4:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should use appPackage and appActivity if appWaitPackage and appWaitActivity are undefined', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            params.waitPkg = 'pkg';
            params.waitActivity = 'act';
            params.stopApp = true;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.startActivity('pkg', 'act', null, null, 'act', 'cat', 'flgs', 'opt', false));

          case 5:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 6:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('reset', function () {
    it('should reset app via reinstall if fullReset is true', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fullReset = true;
            driver.opts.appPackage = 'pkg';
            sandbox.stub(driver, 'startAUT').returns('aut');
            sandbox.stub(_libAndroidHelpers2['default'], 'resetApp').returns(undefined);
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.reset().should.eventually.be.equal('aut'));

          case 6:
            _libAndroidHelpers2['default'].resetApp.calledWith(driver.adb).should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should do fast reset if fullReset is false', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts.fullReset = false;
            driver.opts.appPackage = 'pkg';
            sandbox.stub(_libAndroidHelpers2['default'], 'resetApp').returns(undefined);
            sandbox.stub(driver, 'startAUT').returns('aut');
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.reset().should.eventually.be.equal('aut'));

          case 6:
            _libAndroidHelpers2['default'].resetApp.calledWith(driver.adb).should.be['true'];
            driver.startAUT.calledOnce.should.be['true'];
            expect(driver.curContext).to.eql('NATIVE_APP');

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('startAUT', function () {
    it('should start AUT', function callee$2$0() {
      var params;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = {
              appPackage: 'pkg',
              appActivity: 'act',
              intentAction: 'actn',
              intentCategory: 'cat',
              intentFlags: 'flgs',
              appWaitPackage: 'wpkg',
              appWaitActivity: 'wact',
              appWaitDuration: 'wdur',
              optionalIntentArguments: 'opt',
              userProfile: 1
            };
            params = {
              pkg: 'pkg',
              activity: 'act',
              action: 'actn',
              category: 'cat',
              flags: 'flgs',
              waitPkg: 'wpkg',
              waitActivity: 'wact',
              waitDuration: 'wdur',
              optionalIntentArguments: 'opt',
              stopApp: false,
              user: 1
            };

            driver.opts.dontStopAppOnReset = true;
            params.stopApp = false;
            sandbox.stub(driver.adb, 'startApp');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.startAUT());

          case 7:
            driver.adb.startApp.calledWithExactly(params).should.be['true'];

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('setUrl', function () {
    it('should set url', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg' };
            sandbox.stub(driver.adb, 'startUri');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.setUrl('url'));

          case 4:
            driver.adb.startUri.calledWithExactly('url', 'pkg').should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('closeApp', function () {
    it('should close app', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.opts = { appPackage: 'pkg' };
            sandbox.stub(driver.adb, 'forceStop');
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.closeApp());

          case 4:
            driver.adb.forceStop.calledWithExactly('pkg').should.be['true'];

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getDisplayDensity', function () {
    it('should return the display density of a device', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return '123';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity());

          case 3:
            context$3$0.sent.should.equal(123);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return the display density of an emulator', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function (cmd) {
              var joinedCmd = cmd.join(' ');
              if (joinedCmd.indexOf('ro.sf') !== -1) {
                // device property look up
                return '';
              } else if (joinedCmd.indexOf('qemu.sf') !== -1) {
                // emulator property look up
                return '456';
              }
              return '';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity());

          case 3:
            context$3$0.sent.should.equal(456);

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if the display density property can\'t be found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return '';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity().should.be.rejectedWith(/Failed to get display density property/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw and error if the display density is not a number', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver.adb.shell = function () {
              return 'abc';
            };
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.getDisplayDensity().should.be.rejectedWith(/Failed to get display density property/));

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('parseSurfaceLine', function () {
    it('should return visible true if the surface is visible', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=true rect=1 1 1 1').should.be.eql({
              visible: true,
              x: 1,
              y: 1,
              width: 1,
              height: 1
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return visible false if the surface is not visible', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=false rect=1 1 1 1').should.be.eql({
              visible: false,
              x: 1,
              y: 1,
              width: 1,
              height: 1
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return the parsed surface bounds', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseSurfaceLine)('shown=true rect=(1.0,2.0) 3.0 x 4.0').should.be.eql({
              visible: true,
              x: 1,
              y: 2,
              width: 3,
              height: 4
            });

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });

  // these are used for both parseWindows and getSystemBars tests
  var validWindowOutput = ['  Window #1 Derp', '    stuff', '      Surface: derp shown=false lalalala rect=(9.0,8.0) 7.0 x 6.0', '    more stuff', '  Window #2 StatusBar', '    blah blah blah', '      Surface: blah blah shown=true blah blah rect=(1.0,2.0) 3.0 x 4.0', '    blah blah blah', '  Window #3 NavigationBar', '    womp womp', '      Surface: blah blah shown=false womp womp rect=(5.0,6.0) 50.0 x 60.0', '    qwerty asd zxc'].join('\n');
  var validSystemBars = {
    statusBar: { visible: true, x: 1, y: 2, width: 3, height: 4 },
    navigationBar: { visible: false, x: 5, y: 6, width: 50, height: 60 }
  };

  describe('parseWindows', function () {
    it('should throw an error if the status bar info wasn\'t found', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            expect(function () {
              (0, _libCommandsGeneral.parseWindows)('');
            }).to['throw'](Error, /Failed to parse status bar information./);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should throw an error if the navigation bar info wasn\'t found', function callee$2$0() {
      var windowOutput;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            windowOutput = ['  Window #1 StatusBar', '    blah blah blah', '      Surface: blah blah shown=true blah blah rect=(1.0,2.0) 3.0 x 4.0', '    blah blah blah'].join('\n');

            expect(function () {
              (0, _libCommandsGeneral.parseWindows)(windowOutput);
            }).to['throw'](Error, /Failed to parse navigation bar information./);

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return status and navigation bar info when both are given', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            (0, _libCommandsGeneral.parseWindows)(validWindowOutput).should.be.eql(validSystemBars);

          case 1:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
  describe('getSystemBars', function () {
    it('should throw an error if there\'s no window manager output', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver = new _2['default']();
            driver.adb = {};
            driver.adb.shell = function () {
              return '';
            };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getSystemBars().should.be.rejectedWith(/Did not get window manager output./));

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return the parsed system bar info', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            driver = new _2['default']();
            driver.adb = {};
            driver.adb.shell = function () {
              return validWindowOutput;
            };
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getSystemBars());

          case 5:
            context$3$0.t0 = validSystemBars;
            context$3$0.sent.should.be.eql(context$3$0.t0);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
});
//eslint-disable-line
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9jb21tYW5kcy9nZW5lcmFsLXNwZWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O29CQUFpQixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztxQkFDM0IsT0FBTzs7OztnQkFDQyxVQUFVOzs7O2tDQUNXLCtCQUErQjs7aUNBQzFELDhCQUE4Qjs7OztpQ0FDeEIscUJBQXFCOzs2QkFDNUIsZ0JBQWdCOztzQ0FDYiwwQkFBMEI7Ozs7d0JBQ2xDLFVBQVU7Ozs7eUJBQ1IsWUFBWTs7OztBQUc1QixrQkFBSyxNQUFNLEVBQUUsQ0FBQztBQUNkLGtCQUFLLEdBQUcsNkJBQWdCLENBQUM7O0FBRXpCLElBQUksTUFBTSxZQUFBLENBQUM7QUFDWCxJQUFJLE9BQU8sR0FBRyxtQkFBTSxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDckMsSUFBSSxNQUFNLEdBQUcsa0JBQUssTUFBTSxDQUFDOztBQUV6QixRQUFRLENBQUMsU0FBUyxFQUFFLFlBQVk7QUFDOUIsWUFBVSxDQUFDLFlBQVk7QUFDckIsVUFBTSxHQUFHLG1CQUFtQixDQUFDO0FBQzdCLFVBQU0sQ0FBQyxTQUFTLEdBQUcseUNBQWUsQ0FBQztBQUNuQyxVQUFNLENBQUMsR0FBRyxHQUFHLDRCQUFTLENBQUM7QUFDdkIsVUFBTSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDakIsVUFBTSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7R0FDbEIsQ0FBQyxDQUFDO0FBQ0gsV0FBUyxDQUFDLFlBQVk7QUFDcEIsV0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0dBQ25CLENBQUMsQ0FBQztBQUNILFVBQVEsQ0FBQyxNQUFNLEVBQUUsWUFBWTtBQUMzQixNQUFFLENBQUMsZ0RBQWdELEVBQUU7Ozs7QUFDbkQsbUJBQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUM3QyxrQkFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcs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cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IEFuZHJvaWREcml2ZXIgZnJvbSAnLi4vLi4vLi4nO1xuaW1wb3J0IHsgcGFyc2VTdXJmYWNlTGluZSwgcGFyc2VXaW5kb3dzIH0gZnJvbSAnLi4vLi4vLi4vbGliL2NvbW1hbmRzL2dlbmVyYWwnO1xuaW1wb3J0IGhlbHBlcnMgZnJvbSAnLi4vLi4vLi4vbGliL2FuZHJvaWQtaGVscGVycyc7XG5pbXBvcnQgeyB3aXRoTW9ja3MgfSBmcm9tICdhcHBpdW0tdGVzdC1zdXBwb3J0JztcbmltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IEJvb3RzdHJhcCBmcm9tICdhcHBpdW0tYW5kcm9pZC1ib290c3RyYXAnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IEFEQiBmcm9tICdhcHBpdW0tYWRiJztcblxuXG5jaGFpLnNob3VsZCgpO1xuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuXG5sZXQgZHJpdmVyO1xubGV0IHNhbmRib3ggPSBzaW5vbi5zYW5kYm94LmNyZWF0ZSgpO1xubGV0IGV4cGVjdCA9IGNoYWkuZXhwZWN0O1xuXG5kZXNjcmliZSgnR2VuZXJhbCcsIGZ1bmN0aW9uICgpIHtcbiAgYmVmb3JlRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgZHJpdmVyID0gbmV3IEFuZHJvaWREcml2ZXIoKTtcbiAgICBkcml2ZXIuYm9vdHN0cmFwID0gbmV3IEJvb3RzdHJhcCgpO1xuICAgIGRyaXZlci5hZGIgPSBuZXcgQURCKCk7XG4gICAgZHJpdmVyLmNhcHMgPSB7fTtcbiAgICBkcml2ZXIub3B0cyA9IHt9O1xuICB9KTtcbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBzYW5kYm94LnJlc3RvcmUoKTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdrZXlzJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgc2VuZCBrZXlzIHZpYSBzZXRUZXh0IGJvb3RzdHJhcCBjb21tYW5kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5ib290c3RyYXAsICdzZW5kQWN0aW9uJyk7XG4gICAgICBkcml2ZXIub3B0cy51bmljb2RlS2V5Ym9hcmQgPSB0cnVlO1xuICAgICAgYXdhaXQgZHJpdmVyLmtleXMoJ2tleXMnKTtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuc2VuZEFjdGlvblxuICAgICAgICAuY2FsbGVkV2l0aEV4YWN0bHkoJ3NldFRleHQnLFxuICAgICAgICAgIHt0ZXh0OiAna2V5cycsIHJlcGxhY2U6IGZhbHNlLCB1bmljb2RlS2V5Ym9hcmQ6IHRydWV9KVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBqb2luIGtleXMgaWYga2V5cyBpcyBhcnJheScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpO1xuICAgICAgZHJpdmVyLm9wdHMudW5pY29kZUtleWJvYXJkID0gZmFsc2U7XG4gICAgICBhd2FpdCBkcml2ZXIua2V5cyhbJ2snLCAnZScsICd5JywgJ3MnXSk7XG4gICAgICBkcml2ZXIuYm9vdHN0cmFwLnNlbmRBY3Rpb25cbiAgICAgICAgLmNhbGxlZFdpdGhFeGFjdGx5KCdzZXRUZXh0Jywge3RleHQ6ICdrZXlzJywgcmVwbGFjZTogZmFsc2V9KVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0RGV2aWNlVGltZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBkZXZpY2UgdGltZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc2hlbGwnKTtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwucmV0dXJucygnIDExOjEyICcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmdldERldmljZVRpbWUoKS5zaG91bGQuYmVjb21lKCcxMToxMicpO1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbC5jYWxsZWRXaXRoRXhhY3RseShbJ2RhdGUnXSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aG9yd3MgZXJyb3IgaWYgc2hlbGwgY29tbWFuZCBmYWlsZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ3NoZWxsJykudGhyb3dzKCk7XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0RGV2aWNlVGltZSgpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoJ0NvdWxkIG5vdCBjYXB0dXJlJyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0UGFnZVNvdXJjZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwYWdlIHNvdXJjZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpLndpdGhBcmdzKCdzb3VyY2UnKS5yZXR1cm5zKCdzb3VyY2VzJyk7XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldFBhZ2VTb3VyY2UoKSkuc2hvdWxkLmJlLmVxdWFsKCdzb3VyY2VzJyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnYmFjaycsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHByZXNzIGJhY2snLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmJvb3RzdHJhcCwgJ3NlbmRBY3Rpb24nKTtcbiAgICAgIGF3YWl0IGRyaXZlci5iYWNrKCk7XG4gICAgICBkcml2ZXIuYm9vdHN0cmFwLnNlbmRBY3Rpb24uY2FsbGVkV2l0aEV4YWN0bHkoJ3ByZXNzQmFjaycpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2lzS2V5Ym9hcmRTaG93bicsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGlmIHRoZSBrZXlib2FyZCBpcyBzaG93bicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuaXNTb2Z0S2V5Ym9hcmRQcmVzZW50ID0gKCkgPT4geyByZXR1cm4ge2lzS2V5Ym9hcmRTaG93bjogdHJ1ZSwgY2FuQ2xvc2VLZXlib2FyZDogdHJ1ZX07IH07XG4gICAgICAoYXdhaXQgZHJpdmVyLmlzS2V5Ym9hcmRTaG93bigpKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2UgaWYgdGhlIGtleWJvYXJkIGlzIG5vdCBzaG93bicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuaXNTb2Z0S2V5Ym9hcmRQcmVzZW50ID0gKCkgPT4geyByZXR1cm4ge2lzS2V5Ym9hcmRTaG93bjogZmFsc2UsIGNhbkNsb3NlS2V5Ym9hcmQ6IHRydWV9OyB9O1xuICAgICAgKGF3YWl0IGRyaXZlci5pc0tleWJvYXJkU2hvd24oKSkuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdoaWRlS2V5Ym9hcmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBoaWRlIGtleWJvYXJkIHZpYSBiYWNrIGNvbW1hbmQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnYmFjaycpO1xuICAgICAgZHJpdmVyLmFkYi5pc1NvZnRLZXlib2FyZFByZXNlbnQgPSAoKSA9PiB7IHJldHVybiB7aXNLZXlib2FyZFNob3duOiB0cnVlLCBjYW5DbG9zZUtleWJvYXJkOiB0cnVlfTsgfTtcbiAgICAgIGF3YWl0IGRyaXZlci5oaWRlS2V5Ym9hcmQoKTtcbiAgICAgIGRyaXZlci5iYWNrLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgY2FsbCBiYWNrIGNvbW1hbmQgaWYgY2FuXFwndCBjbG9zZSBrZXlib2FyZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdiYWNrJyk7XG4gICAgICBkcml2ZXIuYWRiLmlzU29mdEtleWJvYXJkUHJlc2VudCA9ICgpID0+IHsgcmV0dXJuIHtpc0tleWJvYXJkU2hvd246IHRydWUsIGNhbkNsb3NlS2V5Ym9hcmQ6IGZhbHNlfTsgfTtcbiAgICAgIGF3YWl0IGRyaXZlci5oaWRlS2V5Ym9hcmQoKTtcbiAgICAgIGRyaXZlci5iYWNrLm5vdENhbGxlZC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIG5vIGtleWJvYXJkIGlzIHByZXNlbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuYWRiLmlzU29mdEtleWJvYXJkUHJlc2VudCA9ICgpID0+IHsgcmV0dXJuIGZhbHNlOyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmhpZGVLZXlib2FyZCgpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL25vdCBwcmVzZW50Lyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnb3BlblNldHRpbmdzQWN0aXZpdHknLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBvcGVuIHNldHRpbmdzIGFjdGl2aXR5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdnZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5JylcbiAgICAgICAgLnJldHVybnMoe2FwcFBhY2thZ2U6ICdwa2cnLCBhcHBBY3Rpdml0eTogJ2FjdCd9KTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc2hlbGwnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnd2FpdEZvck5vdEFjdGl2aXR5Jyk7XG4gICAgICBhd2FpdCBkcml2ZXIub3BlblNldHRpbmdzQWN0aXZpdHkoJ3NldDEnKTtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwuY2FsbGVkV2l0aEV4YWN0bHkoWydhbScsICdzdGFydCcsICctYScsICdhbmRyb2lkLnNldHRpbmdzLnNldDEnXSlcbiAgICAgICAgLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi53YWl0Rm9yTm90QWN0aXZpdHkuY2FsbGVkV2l0aEV4YWN0bHkoJ3BrZycsICdhY3QnLCA1MDAwKVxuICAgICAgICAuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0V2luZG93U2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIGdldCB3aW5kb3cgc2l6ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYm9vdHN0cmFwLCAnc2VuZEFjdGlvbicpXG4gICAgICAgIC53aXRoQXJncygnZ2V0RGV2aWNlU2l6ZScpLnJldHVybnMoJ3NpemUnKTtcbiAgICAgIChhd2FpdCBkcml2ZXIuZ2V0V2luZG93U2l6ZSgpKS5zaG91bGQuYmUuZXF1YWwoJ3NpemUnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdnZXRXaW5kb3dSZWN0JywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgZ2V0IHdpbmRvdyBzaXplJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5ib290c3RyYXAsICdzZW5kQWN0aW9uJylcbiAgICAgICAgLndpdGhBcmdzKCdnZXREZXZpY2VTaXplJykucmV0dXJucyh7d2lkdGg6IDMwMCwgaGVpZ2h0OiA0MDB9KTtcbiAgICAgIGNvbnN0IHJlY3QgPSBhd2FpdCBkcml2ZXIuZ2V0V2luZG93UmVjdCgpO1xuICAgICAgcmVjdC53aWR0aC5zaG91bGQuYmUuZXF1YWwoMzAwKTtcbiAgICAgIHJlY3QuaGVpZ2h0LnNob3VsZC5iZS5lcXVhbCg0MDApO1xuICAgICAgcmVjdC54LnNob3VsZC5iZS5lcXVhbCgwKTtcbiAgICAgIHJlY3QueS5zaG91bGQuYmUuZXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0Q3VycmVudEFjdGl2aXR5JywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgZ2V0IGN1cnJlbnQgYWN0aXZpdHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwQWN0aXZpdHk6ICdhY3QnfSk7XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudEFjdGl2aXR5KCkuc2hvdWxkLmV2ZW50dWFsbHkuYmUuZXF1YWwoJ2FjdCcpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldEN1cnJlbnRQYWNrYWdlJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgZ2V0IGN1cnJlbnQgYWN0aXZpdHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZTogJ3BrZyd9KTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50UGFja2FnZSgpLnNob3VsZC5ldmVudHVhbGx5LmVxdWFsKCdwa2cnKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdpc0FwcEluc3RhbGxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGlmIGFwcCBpcyBpbnN0YWxsZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2lzQXBwSW5zdGFsbGVkJykud2l0aEFyZ3MoJ3BrZycpLnJldHVybnModHJ1ZSk7XG4gICAgICAoYXdhaXQgZHJpdmVyLmlzQXBwSW5zdGFsbGVkKCdwa2cnKSkuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgncmVtb3ZlQXBwJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmVtb3ZlIGFwcCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAndW5pbnN0YWxsQXBrJykud2l0aEFyZ3MoJ3BrZycpLnJldHVybnModHJ1ZSk7XG4gICAgICAoYXdhaXQgZHJpdmVyLnJlbW92ZUFwcCgncGtnJykpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2luc3RhbGxBcHAnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBpbnN0YWxsIGFwcCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBhcHAgPSAnYXBwLmFwayc7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmhlbHBlcnMsICdjb25maWd1cmVBcHAnKS53aXRoQXJncyhhcHAsICcuYXBrJylcbiAgICAgICAgLnJldHVybnMoYXBwKTtcbiAgICAgIHNhbmRib3guc3R1YihmcywgJ3JpbXJhZicpLnJldHVybnMoKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnaW5zdGFsbCcpLnJldHVybnModHJ1ZSk7XG4gICAgICBhd2FpdCBkcml2ZXIuaW5zdGFsbEFwcChhcHApO1xuICAgICAgZHJpdmVyLmhlbHBlcnMuY29uZmlndXJlQXBwLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBmcy5yaW1yYWYubm90Q2FsbGVkLnNob3VsZC5iZS50cnVlO1xuICAgICAgZHJpdmVyLmFkYi5pbnN0YWxsLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiBBUEsgZG9lcyBub3QgZXhpc3QnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBkcml2ZXIuaW5zdGFsbEFwcCgnbm9uL2V4aXN0ZW50L2FwcC5hcGsnKS5zaG91bGQuYmVcbiAgICAgICAgLnJlamVjdGVkV2l0aCgvZG9lcyBub3QgZXhpc3Qgb3IgaXMgbm90IGFjY2Vzc2libGUvKTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdiYWNrZ3JvdW5kJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgYnJpbmcgYXBwIHRvIGJhY2tncm91bmQgYW5kIGJhY2snLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBhcHBQYWNrYWdlID0gJ3dwa2cnO1xuICAgICAgY29uc3QgYXBwQWN0aXZpdHkgPSAnd2Fjdic7XG4gICAgICBkcml2ZXIub3B0cyA9IHthcHBQYWNrYWdlLCBhcHBBY3Rpdml0eSwgaW50ZW50QWN0aW9uOiAnYWN0JyxcbiAgICAgICAgICAgICAgICAgICAgIGludGVudENhdGVnb3J5OiAnY2F0JywgaW50ZW50RmxhZ3M6ICdmbGdzJyxcbiAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiAnb3B0J307XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dvVG9Ib21lJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZSwgYXBwQWN0aXZpdHl9KTtcbiAgICAgIHNhbmRib3guc3R1YihCLCAnZGVsYXknKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdhY3RpdmF0ZUFwcCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmJhY2tncm91bmQoMTApO1xuICAgICAgZHJpdmVyLmFkYi5nZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5LmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLmdvVG9Ib21lLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBCLmRlbGF5LmNhbGxlZFdpdGhFeGFjdGx5KDEwMDAwKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hY3RpdmF0ZUFwcC5jYWxsZWRXaXRoRXhhY3RseShhcHBQYWNrYWdlKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAubm90Q2FsbGVkLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgYnJpbmcgYXBwIHRvIGJhY2tncm91bmQgYW5kIGJhY2sgaWYgc3RhcnRlZCBhZnRlciBzZXNzaW9uIGluaXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBhcHBQYWNrYWdlID0gJ25ld3BrZyc7XG4gICAgICBjb25zdCBhcHBBY3Rpdml0eSA9ICduZXdhY3YnO1xuICAgICAgZHJpdmVyLm9wdHMgPSB7YXBwUGFja2FnZTogJ3BrZycsIGFwcEFjdGl2aXR5OiAnYWN2JywgaW50ZW50QWN0aW9uOiAnYWN0JyxcbiAgICAgICAgICAgICAgICAgICAgIGludGVudENhdGVnb3J5OiAnY2F0JywgaW50ZW50RmxhZ3M6ICdmbGdzJyxcbiAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiAnb3B0J307XG4gICAgICBsZXQgcGFyYW1zID0ge3BrZzogYXBwUGFja2FnZSwgYWN0aXZpdHk6IGFwcEFjdGl2aXR5LCBhY3Rpb246ICdhY3QnLCBjYXRlZ29yeTogJ2NhdCcsXG4gICAgICAgICAgICAgICAgICAgIGZsYWdzOiAnZmxncycsIHdhaXRQa2c6ICd3cGtnJywgd2FpdEFjdGl2aXR5OiAnd2FjdicsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsSW50ZW50QXJndW1lbnRzOiAnb3B0Jywgc3RvcEFwcDogZmFsc2V9O1xuICAgICAgZHJpdmVyLl9jYWNoZWRBY3Rpdml0eUFyZ3MgPSB7W2Ake2FwcFBhY2thZ2V9LyR7YXBwQWN0aXZpdHl9YF06IHBhcmFtc307XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dvVG9Ib21lJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZSwgYXBwQWN0aXZpdHl9KTtcbiAgICAgIHNhbmRib3guc3R1YihCLCAnZGVsYXknKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdhY3RpdmF0ZUFwcCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmJhY2tncm91bmQoMTApO1xuICAgICAgZHJpdmVyLmFkYi5nZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5LmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLmdvVG9Ib21lLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBCLmRlbGF5LmNhbGxlZFdpdGhFeGFjdGx5KDEwMDAwKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hY3RpdmF0ZUFwcC5ub3RDYWxsZWQuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBicmluZyBhcHAgdG8gYmFja2dyb3VuZCBhbmQgYmFjayBpZiB3YWl0aW5nIGZvciBvdGhlciBwa2cgLyBhY3Rpdml0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBjb25zdCBhcHBQYWNrYWdlID0gJ3NvbWVwa2cnO1xuICAgICAgY29uc3QgYXBwQWN0aXZpdHkgPSAnc29tZWFjdic7XG4gICAgICBjb25zdCBhcHBXYWl0UGFja2FnZSA9ICdzb21ld2FpdHBrZyc7XG4gICAgICBjb25zdCBhcHBXYWl0QWN0aXZpdHkgPSAnc29tZXdhaXRhY3YnO1xuICAgICAgZHJpdmVyLm9wdHMgPSB7YXBwUGFja2FnZSwgYXBwQWN0aXZpdHksIGFwcFdhaXRQYWNrYWdlLCBhcHBXYWl0QWN0aXZpdHksXG4gICAgICAgICAgICAgICAgICAgICBpbnRlbnRBY3Rpb246ICdhY3QnLCBpbnRlbnRDYXRlZ29yeTogJ2NhdCcsXG4gICAgICAgICAgICAgICAgICAgICBpbnRlbnRGbGFnczogJ2ZsZ3MnLCBvcHRpb25hbEludGVudEFyZ3VtZW50czogJ29wdCcsXG4gICAgICAgICAgICAgICAgICAgICBzdG9wQXBwOiBmYWxzZX07XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dvVG9Ib21lJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLmFkYiwgJ2dldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHknKVxuICAgICAgICAucmV0dXJucyh7YXBwUGFja2FnZTogYXBwV2FpdFBhY2thZ2UsIGFwcEFjdGl2aXR5OiBhcHBXYWl0QWN0aXZpdHl9KTtcbiAgICAgIHNhbmRib3guc3R1YihCLCAnZGVsYXknKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdhY3RpdmF0ZUFwcCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLmJhY2tncm91bmQoMTApO1xuICAgICAgZHJpdmVyLmFkYi5nZXRGb2N1c2VkUGFja2FnZUFuZEFjdGl2aXR5LmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLmdvVG9Ib21lLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBCLmRlbGF5LmNhbGxlZFdpdGhFeGFjdGx5KDEwMDAwKS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hY3RpdmF0ZUFwcC5jYWxsZWRXaXRoRXhhY3RseShhcHBXYWl0UGFja2FnZSkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0QXBwLm5vdENhbGxlZC5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBicmluZyBhcHAgYmFjayBpZiBzZWNvbmRzIGFyZSBuZWdhdGl2ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnZ29Ub0hvbWUnKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5iYWNrZ3JvdW5kKC0xKTtcbiAgICAgIGRyaXZlci5hZGIuZ29Ub0hvbWUuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAubm90Q2FsbGVkLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldFN0cmluZ3MnLCB3aXRoTW9ja3Moe2hlbHBlcnN9LCAobW9ja3MpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhcHAgc3RyaW5ncycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5ib290c3RyYXAuc2VuZEFjdGlvbiA9ICgpID0+IHsgcmV0dXJuICcnOyB9O1xuICAgICAgbW9ja3MuaGVscGVycy5leHBlY3RzKFwicHVzaFN0cmluZ3NcIilcbiAgICAgICAgICAucmV0dXJucyh7dGVzdDogJ2VuX3ZhbHVlJ30pO1xuICAgICAgbGV0IHN0cmluZ3MgPSBhd2FpdCBkcml2ZXIuZ2V0U3RyaW5ncygnZW4nKTtcbiAgICAgIHN0cmluZ3MudGVzdC5zaG91bGQuZXF1YWwoJ2VuX3ZhbHVlJyk7XG4gICAgICBtb2Nrcy5oZWxwZXJzLnZlcmlmeSgpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNhY2hlZCBhcHAgc3RyaW5ncyBmb3IgdGhlIHNwZWNpZmllZCBsYW5ndWFnZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuZ2V0RGV2aWNlTGFuZ3VhZ2UgPSAoKSA9PiB7IHJldHVybiAnZW4nOyB9O1xuICAgICAgZHJpdmVyLmFwa1N0cmluZ3MuZW4gPSB7dGVzdDogJ2VuX3ZhbHVlJ307XG4gICAgICBkcml2ZXIuYXBrU3RyaW5ncy5mciA9IHt0ZXN0OiAnZnJfdmFsdWUnfTtcbiAgICAgIGxldCBzdHJpbmdzID0gYXdhaXQgZHJpdmVyLmdldFN0cmluZ3MoJ2ZyJyk7XG4gICAgICBzdHJpbmdzLnRlc3Quc2hvdWxkLmVxdWFsKCdmcl92YWx1ZScpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNhY2hlZCBhcHAgc3RyaW5ncyBmb3IgdGhlIGRldmljZSBsYW5ndWFnZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuZ2V0RGV2aWNlTGFuZ3VhZ2UgPSAoKSA9PiB7IHJldHVybiAnZW4nOyB9O1xuICAgICAgZHJpdmVyLmFwa1N0cmluZ3MuZW4gPSB7dGVzdDogJ2VuX3ZhbHVlJ307XG4gICAgICBkcml2ZXIuYXBrU3RyaW5ncy5mciA9IHt0ZXN0OiAnZnJfdmFsdWUnfTtcbiAgICAgIGxldCBzdHJpbmdzID0gYXdhaXQgZHJpdmVyLmdldFN0cmluZ3MoKTtcbiAgICAgIHN0cmluZ3MudGVzdC5zaG91bGQuZXF1YWwoJ2VuX3ZhbHVlJyk7XG4gICAgfSk7XG4gIH0pKTtcbiAgZGVzY3JpYmUoJ2xhdW5jaEFwcCcsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIGluaXQgYW5kIHN0YXJ0IGFwcCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdpbml0QVVUJyk7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc3RhcnRBVVQnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5sYXVuY2hBcHAoKTtcbiAgICAgIGRyaXZlci5pbml0QVVULmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuc3RhcnRBVVQuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdzdGFydEFjdGl2aXR5JywgZnVuY3Rpb24gKCkge1xuICAgIGxldCBwYXJhbXM7XG4gICAgYmVmb3JlRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJhbXMgPSB7cGtnOiAncGtnJywgYWN0aXZpdHk6ICdhY3QnLCB3YWl0UGtnOiAnd3BrZycsIHdhaXRBY3Rpdml0eTogJ3dhY3QnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2FjdCcsIGNhdGVnb3J5OiAnY2F0JywgZmxhZ3M6ICdmbGdzJywgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRBcHAnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHN0YXJ0IGFjdGl2aXR5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyYW1zLm9wdGlvbmFsSW50ZW50QXJndW1lbnRzID0gJ29wdCc7XG4gICAgICBwYXJhbXMuc3RvcEFwcCA9IGZhbHNlO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoJ3BrZycsICdhY3QnLCAnd3BrZycsICd3YWN0JywgJ2FjdCcsXG4gICAgICAgICdjYXQnLCAnZmxncycsICdvcHQnLCB0cnVlKTtcbiAgICAgIGRyaXZlci5hZGIuc3RhcnRBcHAuY2FsbGVkV2l0aEV4YWN0bHkocGFyYW1zKS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHVzZSBkb250U3RvcEFwcE9uUmVzZXQgZnJvbSBvcHRzIGlmIGl0IGlzIG5vdCBwYXNzZWQgYXMgcGFyYW0nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIub3B0cy5kb250U3RvcEFwcE9uUmVzZXQgPSB0cnVlO1xuICAgICAgcGFyYW1zLnN0b3BBcHAgPSBmYWxzZTtcbiAgICAgIGF3YWl0IGRyaXZlci5zdGFydEFjdGl2aXR5KCdwa2cnLCAnYWN0JywgJ3dwa2cnLCAnd2FjdCcsICdhY3QnLCAnY2F0JywgJ2ZsZ3MnLCAnb3B0Jyk7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0QXBwLmNhbGxlZFdpdGhFeGFjdGx5KHBhcmFtcykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB1c2UgYXBwUGFja2FnZSBhbmQgYXBwQWN0aXZpdHkgaWYgYXBwV2FpdFBhY2thZ2UgYW5kIGFwcFdhaXRBY3Rpdml0eSBhcmUgdW5kZWZpbmVkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyYW1zLndhaXRQa2cgPSAncGtnJztcbiAgICAgIHBhcmFtcy53YWl0QWN0aXZpdHkgPSAnYWN0JztcbiAgICAgIHBhcmFtcy5zdG9wQXBwID0gdHJ1ZTtcbiAgICAgIGF3YWl0IGRyaXZlci5zdGFydEFjdGl2aXR5KCdwa2cnLCAnYWN0JywgbnVsbCwgbnVsbCwgJ2FjdCcsICdjYXQnLCAnZmxncycsICdvcHQnLCBmYWxzZSk7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0QXBwLmNhbGxlZFdpdGhFeGFjdGx5KHBhcmFtcykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgncmVzZXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZXNldCBhcHAgdmlhIHJlaW5zdGFsbCBpZiBmdWxsUmVzZXQgaXMgdHJ1ZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5vcHRzLmZ1bGxSZXNldCA9IHRydWU7XG4gICAgICBkcml2ZXIub3B0cy5hcHBQYWNrYWdlID0gJ3BrZyc7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc3RhcnRBVVQnKS5yZXR1cm5zKCdhdXQnKTtcbiAgICAgIHNhbmRib3guc3R1YihoZWxwZXJzLCAncmVzZXRBcHAnKS5yZXR1cm5zKHVuZGVmaW5lZCk7XG4gICAgICBhd2FpdCBkcml2ZXIucmVzZXQoKS5zaG91bGQuZXZlbnR1YWxseS5iZS5lcXVhbCgnYXV0Jyk7XG4gICAgICBoZWxwZXJzLnJlc2V0QXBwLmNhbGxlZFdpdGgoZHJpdmVyLmFkYikuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuc3RhcnRBVVQuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGRvIGZhc3QgcmVzZXQgaWYgZnVsbFJlc2V0IGlzIGZhbHNlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLm9wdHMuZnVsbFJlc2V0ID0gZmFsc2U7XG4gICAgICBkcml2ZXIub3B0cy5hcHBQYWNrYWdlID0gJ3BrZyc7XG4gICAgICBzYW5kYm94LnN0dWIoaGVscGVycywgJ3Jlc2V0QXBwJykucmV0dXJucyh1bmRlZmluZWQpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ3N0YXJ0QVVUJykucmV0dXJucygnYXV0Jyk7XG4gICAgICBhd2FpdCBkcml2ZXIucmVzZXQoKS5zaG91bGQuZXZlbnR1YWxseS5iZS5lcXVhbCgnYXV0Jyk7XG4gICAgICBoZWxwZXJzLnJlc2V0QXBwLmNhbGxlZFdpdGgoZHJpdmVyLmFkYikuc2hvdWxkLmJlLnRydWU7XG4gICAgICBkcml2ZXIuc3RhcnRBVVQuY2FsbGVkT25jZS5zaG91bGQuYmUudHJ1ZTtcbiAgICAgIGV4cGVjdChkcml2ZXIuY3VyQ29udGV4dCkudG8uZXFsKCdOQVRJVkVfQVBQJyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnc3RhcnRBVVQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCBzdGFydCBBVVQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIub3B0cyA9IHtcbiAgICAgICAgYXBwUGFja2FnZTogJ3BrZycsXG4gICAgICAgIGFwcEFjdGl2aXR5OiAnYWN0JyxcbiAgICAgICAgaW50ZW50QWN0aW9uOiAnYWN0bicsXG4gICAgICAgIGludGVudENhdGVnb3J5OiAnY2F0JyxcbiAgICAgICAgaW50ZW50RmxhZ3M6ICdmbGdzJyxcbiAgICAgICAgYXBwV2FpdFBhY2thZ2U6ICd3cGtnJyxcbiAgICAgICAgYXBwV2FpdEFjdGl2aXR5OiAnd2FjdCcsXG4gICAgICAgIGFwcFdhaXREdXJhdGlvbjogJ3dkdXInLFxuICAgICAgICBvcHRpb25hbEludGVudEFyZ3VtZW50czogJ29wdCcsXG4gICAgICAgIHVzZXJQcm9maWxlOiAxXG4gICAgICB9O1xuICAgICAgbGV0IHBhcmFtcyA9IHtcbiAgICAgICAgcGtnOiAncGtnJyxcbiAgICAgICAgYWN0aXZpdHk6ICdhY3QnLFxuICAgICAgICBhY3Rpb246ICdhY3RuJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdjYXQnLFxuICAgICAgICBmbGFnczogJ2ZsZ3MnLFxuICAgICAgICB3YWl0UGtnOiAnd3BrZycsXG4gICAgICAgIHdhaXRBY3Rpdml0eTogJ3dhY3QnLFxuICAgICAgICB3YWl0RHVyYXRpb246ICd3ZHVyJyxcbiAgICAgICAgb3B0aW9uYWxJbnRlbnRBcmd1bWVudHM6ICdvcHQnLFxuICAgICAgICBzdG9wQXBwOiBmYWxzZSxcbiAgICAgICAgdXNlcjogMVxuICAgICAgfTtcbiAgICAgIGRyaXZlci5vcHRzLmRvbnRTdG9wQXBwT25SZXNldCA9IHRydWU7XG4gICAgICBwYXJhbXMuc3RvcEFwcCA9IGZhbHNlO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdzdGFydEFwcCcpO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QVVUKCk7XG4gICAgICBkcml2ZXIuYWRiLnN0YXJ0QXBwLmNhbGxlZFdpdGhFeGFjdGx5KHBhcmFtcykuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnc2V0VXJsJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgc2V0IHVybCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5vcHRzID0ge2FwcFBhY2thZ2U6ICdwa2cnfTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIuYWRiLCAnc3RhcnRVcmknKTtcbiAgICAgIGF3YWl0IGRyaXZlci5zZXRVcmwoJ3VybCcpO1xuICAgICAgZHJpdmVyLmFkYi5zdGFydFVyaS5jYWxsZWRXaXRoRXhhY3RseSgndXJsJywgJ3BrZycpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2Nsb3NlQXBwJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgY2xvc2UgYXBwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLm9wdHMgPSB7YXBwUGFja2FnZTogJ3BrZyd9O1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlci5hZGIsICdmb3JjZVN0b3AnKTtcbiAgICAgIGF3YWl0IGRyaXZlci5jbG9zZUFwcCgpO1xuICAgICAgZHJpdmVyLmFkYi5mb3JjZVN0b3AuY2FsbGVkV2l0aEV4YWN0bHkoJ3BrZycpLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2dldERpc3BsYXlEZW5zaXR5JywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBkaXNwbGF5IGRlbnNpdHkgb2YgYSBkZXZpY2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsID0gKCkgPT4geyByZXR1cm4gJzEyMyc7IH07XG4gICAgICAoYXdhaXQgZHJpdmVyLmdldERpc3BsYXlEZW5zaXR5KCkpLnNob3VsZC5lcXVhbCgxMjMpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBkaXNwbGF5IGRlbnNpdHkgb2YgYW4gZW11bGF0b3InLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsID0gKGNtZCkgPT4ge1xuICAgICAgICBsZXQgam9pbmVkQ21kID0gY21kLmpvaW4oJyAnKTtcbiAgICAgICAgaWYgKGpvaW5lZENtZC5pbmRleE9mKCdyby5zZicpICE9PSAtMSkge1xuICAgICAgICAgIC8vIGRldmljZSBwcm9wZXJ0eSBsb29rIHVwXG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9IGVsc2UgaWYgKGpvaW5lZENtZC5pbmRleE9mKCdxZW11LnNmJykgIT09IC0xKSB7XG4gICAgICAgICAgLy8gZW11bGF0b3IgcHJvcGVydHkgbG9vayB1cFxuICAgICAgICAgIHJldHVybiAnNDU2JztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9O1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXREaXNwbGF5RGVuc2l0eSgpKS5zaG91bGQuZXF1YWwoNDU2KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZSBkaXNwbGF5IGRlbnNpdHkgcHJvcGVydHkgY2FuXFwndCBiZSBmb3VuZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5hZGIuc2hlbGwgPSAoKSA9PiB7IHJldHVybiAnJzsgfTtcbiAgICAgIGF3YWl0IGRyaXZlci5nZXREaXNwbGF5RGVuc2l0eSgpLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0ZhaWxlZCB0byBnZXQgZGlzcGxheSBkZW5zaXR5IHByb3BlcnR5Lyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbmQgZXJyb3IgaWYgdGhlIGRpc3BsYXkgZGVuc2l0eSBpcyBub3QgYSBudW1iZXInLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIuYWRiLnNoZWxsID0gKCkgPT4geyByZXR1cm4gJ2FiYyc7IH07XG4gICAgICBhd2FpdCBkcml2ZXIuZ2V0RGlzcGxheURlbnNpdHkoKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKC9GYWlsZWQgdG8gZ2V0IGRpc3BsYXkgZGVuc2l0eSBwcm9wZXJ0eS8pO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ3BhcnNlU3VyZmFjZUxpbmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmlzaWJsZSB0cnVlIGlmIHRoZSBzdXJmYWNlIGlzIHZpc2libGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBwYXJzZVN1cmZhY2VMaW5lKCdzaG93bj10cnVlIHJlY3Q9MSAxIDEgMScpLnNob3VsZC5iZS5lcWwoe1xuICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICB4OiAxLFxuICAgICAgICB5OiAxLFxuICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgaGVpZ2h0OiAxXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB2aXNpYmxlIGZhbHNlIGlmIHRoZSBzdXJmYWNlIGlzIG5vdCB2aXNpYmxlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyc2VTdXJmYWNlTGluZSgnc2hvd249ZmFsc2UgcmVjdD0xIDEgMSAxJykuc2hvdWxkLmJlLmVxbCh7XG4gICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICB4OiAxLFxuICAgICAgICB5OiAxLFxuICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgaGVpZ2h0OiAxXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgcGFyc2VkIHN1cmZhY2UgYm91bmRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyc2VTdXJmYWNlTGluZSgnc2hvd249dHJ1ZSByZWN0PSgxLjAsMi4wKSAzLjAgeCA0LjAnKS5zaG91bGQuYmUuZXFsKHtcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgeDogMSxcbiAgICAgICAgeTogMixcbiAgICAgICAgd2lkdGg6IDMsXG4gICAgICAgIGhlaWdodDogNFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHRoZXNlIGFyZSB1c2VkIGZvciBib3RoIHBhcnNlV2luZG93cyBhbmQgZ2V0U3lzdGVtQmFycyB0ZXN0c1xuICBsZXQgdmFsaWRXaW5kb3dPdXRwdXQgPSBbXG4gICAgJyAgV2luZG93ICMxIERlcnAnLFxuICAgICcgICAgc3R1ZmYnLFxuICAgICcgICAgICBTdXJmYWNlOiBkZXJwIHNob3duPWZhbHNlIGxhbGFsYWxhIHJlY3Q9KDkuMCw4LjApIDcuMCB4IDYuMCcsXG4gICAgJyAgICBtb3JlIHN0dWZmJyxcbiAgICAnICBXaW5kb3cgIzIgU3RhdHVzQmFyJyxcbiAgICAnICAgIGJsYWggYmxhaCBibGFoJyxcbiAgICAnICAgICAgU3VyZmFjZTogYmxhaCBibGFoIHNob3duPXRydWUgYmxhaCBibGFoIHJlY3Q9KDEuMCwyLjApIDMuMCB4IDQuMCcsXG4gICAgJyAgICBibGFoIGJsYWggYmxhaCcsXG4gICAgJyAgV2luZG93ICMzIE5hdmlnYXRpb25CYXInLFxuICAgICcgICAgd29tcCB3b21wJyxcbiAgICAnICAgICAgU3VyZmFjZTogYmxhaCBibGFoIHNob3duPWZhbHNlIHdvbXAgd29tcCByZWN0PSg1LjAsNi4wKSA1MC4wIHggNjAuMCcsXG4gICAgJyAgICBxd2VydHkgYXNkIHp4YydcbiAgXS5qb2luKCdcXG4nKTtcbiAgbGV0IHZhbGlkU3lzdGVtQmFycyA9IHtcbiAgICBzdGF0dXNCYXI6IHt2aXNpYmxlOiB0cnVlLCB4OiAxLCB5OiAyLCB3aWR0aDogMywgaGVpZ2h0OiA0fSxcbiAgICBuYXZpZ2F0aW9uQmFyOiB7dmlzaWJsZTogZmFsc2UsIHg6IDUsIHk6IDYsIHdpZHRoOiA1MCwgaGVpZ2h0OiA2MH1cbiAgfTtcblxuICBkZXNjcmliZSgncGFyc2VXaW5kb3dzJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIHN0YXR1cyBiYXIgaW5mbyB3YXNuXFwndCBmb3VuZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7IHBhcnNlV2luZG93cygnJyk7IH0pXG4gICAgICAgIC50by50aHJvdyhFcnJvciwgL0ZhaWxlZCB0byBwYXJzZSBzdGF0dXMgYmFyIGluZm9ybWF0aW9uLi8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIG5hdmlnYXRpb24gYmFyIGluZm8gd2FzblxcJ3QgZm91bmQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgd2luZG93T3V0cHV0ID0gW1xuICAgICAgICAnICBXaW5kb3cgIzEgU3RhdHVzQmFyJyxcbiAgICAgICAgJyAgICBibGFoIGJsYWggYmxhaCcsXG4gICAgICAgICcgICAgICBTdXJmYWNlOiBibGFoIGJsYWggc2hvd249dHJ1ZSBibGFoIGJsYWggcmVjdD0oMS4wLDIuMCkgMy4wIHggNC4wJyxcbiAgICAgICAgJyAgICBibGFoIGJsYWggYmxhaCdcbiAgICAgIF0uam9pbignXFxuJyk7XG4gICAgICBleHBlY3QoKCkgPT4geyBwYXJzZVdpbmRvd3Mod2luZG93T3V0cHV0KTsgfSlcbiAgICAgICAgLnRvLnRocm93KEVycm9yLCAvRmFpbGVkIHRvIHBhcnNlIG5hdmlnYXRpb24gYmFyIGluZm9ybWF0aW9uLi8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV0dXJuIHN0YXR1cyBhbmQgbmF2aWdhdGlvbiBiYXIgaW5mbyB3aGVuIGJvdGggYXJlIGdpdmVuJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyc2VXaW5kb3dzKHZhbGlkV2luZG93T3V0cHV0KS5zaG91bGQuYmUuZXFsKHZhbGlkU3lzdGVtQmFycyk7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgnZ2V0U3lzdGVtQmFycycsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIHRoZXJlXFwncyBubyB3aW5kb3cgbWFuYWdlciBvdXRwdXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIgPSBuZXcgQW5kcm9pZERyaXZlcigpO1xuICAgICAgZHJpdmVyLmFkYiA9IHt9O1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbCA9ICgpID0+IHsgcmV0dXJuICcnOyB9O1xuICAgICAgYXdhaXQgZHJpdmVyLmdldFN5c3RlbUJhcnMoKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKC9EaWQgbm90IGdldCB3aW5kb3cgbWFuYWdlciBvdXRwdXQuLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIHBhcnNlZCBzeXN0ZW0gYmFyIGluZm8nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIgPSBuZXcgQW5kcm9pZERyaXZlcigpO1xuICAgICAgZHJpdmVyLmFkYiA9IHt9O1xuICAgICAgZHJpdmVyLmFkYi5zaGVsbCA9ICgpID0+IHsgcmV0dXJuIHZhbGlkV2luZG93T3V0cHV0OyB9O1xuICAgICAgKGF3YWl0IGRyaXZlci5nZXRTeXN0ZW1CYXJzKCkpLnNob3VsZC5iZS5lcWwodmFsaWRTeXN0ZW1CYXJzKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==
